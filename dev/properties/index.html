<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MRI/collision properties · MCMRSimulator.jl</title><meta name="title" content="MRI/collision properties · MCMRSimulator.jl"/><meta property="og:title" content="MRI/collision properties · MCMRSimulator.jl"/><meta property="twitter:title" content="MRI/collision properties · MCMRSimulator.jl"/><meta name="description" content="Documentation for MCMRSimulator.jl: a Monte Carlo MRI simulator in Julia"/><meta property="og:description" content="Documentation for MCMRSimulator.jl: a Monte Carlo MRI simulator in Julia"/><meta property="twitter:description" content="Documentation for MCMRSimulator.jl: a Monte Carlo MRI simulator in Julia"/><meta property="og:url" content="https://open.win.ox.ac.uk/pages/ndcn0236/mcmrsimulator.jl/stable/properties/"/><meta property="twitter:url" content="https://open.win.ox.ac.uk/pages/ndcn0236/mcmrsimulator.jl/stable/properties/"/><link rel="canonical" href="https://open.win.ox.ac.uk/pages/ndcn0236/mcmrsimulator.jl/stable/properties/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MCMRSimulator.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../tutorial_julia/">Tutorial (Julia)</a></li><li><a class="tocitem" href="../tutorial_cli/">Tutorial (CLI)</a></li><li><a class="tocitem" href="../geometry/">Geometry</a></li><li class="is-active"><a class="tocitem" href>MRI/collision properties</a><ul class="internal"><li><a class="tocitem" href="#MRI-properties"><span>MRI properties</span></a></li><li><a class="tocitem" href="#Collision-properties"><span>Collision properties</span></a></li></ul></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>MRI/collision properties</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MRI/collision properties</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl" title="View the repository"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">Repository</span></a><a class="docs-navbar-link" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/main/docs/src/properties.md" title="Edit source"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="properties"><a class="docs-heading-anchor" href="#properties">Simulation properties</a><a id="properties-1"></a><a class="docs-heading-anchor-permalink" href="#properties" title="Permalink"></a></h1><p>How the spins behave is determined by the tissue <a href="../geometry/#geometry">geometry</a>, the applied MRI sequences, and user-provided flags determining how the spin magnetisation evolves. Here we discuss how the spin magnetisation evolution can be affected by these user-provided flags.</p><p>For example, one such flag is the <code>diffusivity</code>, which can be set as a keyword argument while generating the <a href="../api/#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a>.</p><h2 id="MRI-properties"><a class="docs-heading-anchor" href="#MRI-properties">MRI properties</a><a id="MRI-properties-1"></a><a class="docs-heading-anchor-permalink" href="#MRI-properties" title="Permalink"></a></h2><p>MRI properties determine the spin evolution for free and stuck particles. They include:</p><ul><li>the longitudinal relaxation rate <code>R1</code></li><li>the transverse relaxation rate <code>R2</code></li><li>the global <code>off_resonance</code> field (i.e., any off-resonance not caused by the sequence or the geometry)</li></ul><p>At the <a href="../api/#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> level these parameters can be set by supplying the <code>R1</code>, <code>R2</code>, or <code>off_resonance</code> flags (see <a href="../api/#MCMRSimulator.Properties.GlobalProperties"><code>GlobalProperties</code></a>), such as:</p><pre><code class="language-julia hljs">simulation = Simulation(sequences, R2=1/80)</code></pre><p>These MRI properties can be locally altered when defining the <a href="../geometry/#geometry">geometry</a>. In the geometry they can be seperately set for spins stuck to the geometry surface or those spins that are inside specific objects in the geometry. The total relaxation rate (and off-resonance field) is set by the sum of the global value, the value set for any surface the spin is stuck to, and the value set for any obstruction that the spin is inside of. A single spin might be inside of multiple obstructions at once, if they overlap. In that case, only the first one will be considered (in the order that the obstructions are supplied by the user). For the off-resonance field there might also be a contribution of the magnetic suscpetibility of any <a href="../api/#MCMRSimulator.Geometries.User.Obstructions.Cylinders"><code>Cylinders</code></a>, <a href="../api/#MCMRSimulator.Geometries.User.Obstructions.Annuli"><code>Annuli</code></a>, or <a href="../api/#MCMRSimulator.Geometries.User.Obstructions.Mesh"><code>Mesh</code></a>.</p><p>If not set at the global or local level, there will be no longitudinal or transverse relaxation and there will be no off-resonance field.</p><p>From the command line interface, the global parameters are set during the <code>mcmr run</code> command using <code>--diffusivity</code>, <code>--R1</code>, and <code>--R2</code> keywords. Local parameters will already have been set at an earlier stage during the creation of the geometry using <code>mcmr geometry create/create-random</code>.</p><h2 id="Collision-properties"><a class="docs-heading-anchor" href="#Collision-properties">Collision properties</a><a id="Collision-properties-1"></a><a class="docs-heading-anchor-permalink" href="#Collision-properties" title="Permalink"></a></h2><p>Collision properties determine the behaviour of spins at the time of a collision. Like MRI properties they can be set at the global level (while creating <a href="../api/#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a>) or overwritten at the local level (<a href="../geometry/#geometry">geometry</a>). There are four such properties:</p><ul><li><a href="../api/#MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.surface_relaxivity</code></a>: the fraction of transverse signal lost (and longitudinal signal regained) at every collision. This fraction is adjusted to take into account the timestep (see <a href="../api/#MCMRSimulator.Properties.correct_for_timestep-Tuple{Any, Any}"><code>MCMRSimulator.correct_for_timestep</code></a>). Note that this is not the recommended way to model magnetisation transfer. Instead, we recommend using the <code>surface_density</code> as discussed below.</li><li><a href="../api/#MCMRSimulator.Geometries.Internal.Properties.permeability-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.permeability</code></a>: the probability of the spin passing through the surface. If the spins do not pass through, they will undergo regular reflection (or get stuck, see below). Like <code>MT_fraction</code> it will be adjusted to take into account the timestep (see <a href="../api/#MCMRSimulator.Properties.correct_for_timestep-Tuple{Any, Any}"><code>MCMRSimulator.correct_for_timestep</code></a>).</li><li><a href="../api/#MCMRSimulator.Geometries.Internal.Properties.surface_density-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.surface_density</code></a> and <a href="../api/#MCMRSimulator.Geometries.Internal.Properties.dwell_time-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.dwell_time</code></a>: These control the density and dwell time of spins on the surface. Depending on the MRI properties assigned to these stuck particles (see above), these stuck particles can be used to represent water stuck at the membranes due to surface tension or spins in the membrane itself (which is in exchange with the free water through magnetisation transfer).</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../geometry/">« Geometry</a><a class="docs-footer-nextpage" href="../api/">API »</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.5.0 on <span class="colophon-date" title="Monday 5 August 2024 15:54">Monday 5 August 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
