<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · MCMRSimulator.jl</title><meta name="title" content="API · MCMRSimulator.jl"/><meta property="og:title" content="API · MCMRSimulator.jl"/><meta property="twitter:title" content="API · MCMRSimulator.jl"/><meta name="description" content="Documentation for MCMRSimulator.jl: a Monte Carlo MRI simulator in Julia"/><meta property="og:description" content="Documentation for MCMRSimulator.jl: a Monte Carlo MRI simulator in Julia"/><meta property="twitter:description" content="Documentation for MCMRSimulator.jl: a Monte Carlo MRI simulator in Julia"/><meta property="og:url" content="https://open.win.ox.ac.uk/pages/ndcn0236/mcmrsimulator.jl/stable/api/"/><meta property="twitter:url" content="https://open.win.ox.ac.uk/pages/ndcn0236/mcmrsimulator.jl/stable/api/"/><link rel="canonical" href="https://open.win.ox.ac.uk/pages/ndcn0236/mcmrsimulator.jl/stable/api/"/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MCMRSimulator.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../tutorial_julia/">Tutorial (Julia)</a></li><li><a class="tocitem" href="../tutorial_cli/">Tutorial (CLI)</a></li><li><a class="tocitem" href="../geometry/">Geometry</a></li><li><a class="tocitem" href="../sequence/">Sequence</a></li><li><a class="tocitem" href="../properties/">MRI/collision properties</a></li><li class="is-active"><a class="tocitem" href>API</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl" title="View the repository"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">Repository</span></a><a class="docs-navbar-link" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/main/docs/src/api.md" title="Edit source"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="api"><a class="docs-heading-anchor" href="#api">MCMRSimulator.jl API</a><a id="api-1"></a><a class="docs-heading-anchor-permalink" href="#api" title="Permalink"></a></h1><p>This is the API for <a href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl">MCMRSimulator</a>. For a more user-friendly introduction, click <a href="../#Introduction">here</a>.</p><ul><li><a href="#MCMRSimulator.CLI"><code>MCMRSimulator.CLI</code></a></li><li><a href="#MCMRSimulator.CLI.Geometry"><code>MCMRSimulator.CLI.Geometry</code></a></li><li><a href="#MCMRSimulator.CLI.Run"><code>MCMRSimulator.CLI.Run</code></a></li><li><a href="#MCMRSimulator.CLI.Sequence"><code>MCMRSimulator.CLI.Sequence</code></a></li><li><a href="#MCMRSimulator.Evolve"><code>MCMRSimulator.Evolve</code></a></li><li><a href="#MCMRSimulator.Geometries"><code>MCMRSimulator.Geometries</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal"><code>MCMRSimulator.Geometries.Internal</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups"><code>MCMRSimulator.Geometries.Internal.FixedObstructionGroups</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.IsInsideMesh"><code>MCMRSimulator.Geometries.Internal.IsInsideMesh</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions"><code>MCMRSimulator.Geometries.Internal.Obstructions</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties"><code>MCMRSimulator.Geometries.Internal.Properties</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.RayGridIntersection"><code>MCMRSimulator.Geometries.Internal.RayGridIntersection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections"><code>MCMRSimulator.Geometries.Internal.Reflections</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Triangle"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Triangle</code></a></li><li><a href="#MCMRSimulator.Geometries.User"><code>MCMRSimulator.Geometries.User</code></a></li><li><a href="#MCMRSimulator.Geometries.User.JSON"><code>MCMRSimulator.Geometries.User.JSON</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes"><code>MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh"><code>MCMRSimulator.Geometries.User.SplitMesh</code></a></li><li><a href="#MCMRSimulator.MCMRSimulator"><code>MCMRSimulator.MCMRSimulator</code></a></li><li><a href="#MCMRSimulator.Methods"><code>MCMRSimulator.Methods</code></a></li><li><a href="#MCMRSimulator.Properties"><code>MCMRSimulator.Properties</code></a></li><li><a href="#MCMRSimulator.Scanners"><code>MCMRSimulator.Scanners</code></a></li><li><a href="#MCMRSimulator.Sequences.JSON"><code>MCMRSimulator.Sequences.JSON</code></a></li><li><a href="#MCMRSimulator.Sequences.Methods"><code>MCMRSimulator.Sequences.Methods</code></a></li><li><a href="#MCMRSimulator.Spins"><code>MCMRSimulator.Spins</code></a></li><li><a href="#MCMRSimulator.Subsets"><code>MCMRSimulator.Subsets</code></a></li><li><a href="#MCMRSimulator.Constants.gyromagnetic_ratio"><code>MCMRSimulator.Constants.gyromagnetic_ratio</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.empty_obstruction_intersections"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.empty_obstruction_intersections</code></a></li><li><a href="#MCMRSimulator.Scanners.Siemens_Connectom"><code>MCMRSimulator.Scanners.Siemens_Connectom</code></a></li><li><a href="#MCMRSimulator.Scanners.Siemens_Prisma"><code>MCMRSimulator.Scanners.Siemens_Prisma</code></a></li><li><a href="#MCMRSimulator.Scanners.Siemens_Terra"><code>MCMRSimulator.Scanners.Siemens_Terra</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox-Union{Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}}, Tuple{N}} where N"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup}"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Gridify.Grid"><code>MCMRSimulator.Geometries.Internal.Gridify.Grid</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.Shifts.Shift"><code>MCMRSimulator.Geometries.Internal.Obstructions.Shifts.Shift</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.MRIProperties"><code>MCMRSimulator.Geometries.Internal.Properties.MRIProperties</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>MCMRSimulator.Geometries.Internal.Reflections.Reflection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection-Tuple{Any}"><code>MCMRSimulator.Geometries.Internal.Reflections.Reflection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.FixedSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.FixedSusceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Annuli"><code>MCMRSimulator.Geometries.User.Obstructions.Annuli</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Cylinders"><code>MCMRSimulator.Geometries.User.Obstructions.Cylinders</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Fields.Field"><code>MCMRSimulator.Geometries.User.Obstructions.Fields.Field</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue"><code>MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Mesh"><code>MCMRSimulator.Geometries.User.Obstructions.Mesh</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.ObstructionType"><code>MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.ObstructionType</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Spheres"><code>MCMRSimulator.Geometries.User.Obstructions.Spheres</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Walls"><code>MCMRSimulator.Geometries.User.Obstructions.Walls</code></a></li><li><a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>MCMRSimulator.Plot.PlotPlanes.PlotPlane</code></a></li><li><a href="#MCMRSimulator.Properties.GlobalProperties"><code>MCMRSimulator.Properties.GlobalProperties</code></a></li><li><a href="#MCMRSimulator.Scanners.Scanner"><code>MCMRSimulator.Scanners.Scanner</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{Number}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{AbstractVector}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{Union{Readout, MRGradients, MCMRSimulator.Sequences.Instants.InstantComponent, RFPulse}}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a></li><li><a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MCMRSimulator.Sequences.Gradients.MRGradients</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>MCMRSimulator.Sequences.Instants.InstantGradient</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>MCMRSimulator.Sequences.Instants.InstantRFPulse</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.Readout"><code>MCMRSimulator.Sequences.Instants.Readout</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.Sequence"><code>MCMRSimulator.Sequences.Main.Sequence</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.SequencePart"><code>MCMRSimulator.Sequences.Main.SequencePart</code></a></li><li><a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>MCMRSimulator.Sequences.RadioFrequency.RFPulse</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.Shape"><code>MCMRSimulator.Sequences.Shapes.Shape</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.Shape-Tuple{MCMRSimulator.Sequences.PulseQ.CompressedPulseqShape}"><code>MCMRSimulator.Sequences.Shapes.Shape</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.ShapePart"><code>MCMRSimulator.Sequences.Shapes.ShapePart</code></a></li><li><a href="#MCMRSimulator.Simulations.Simulation"><code>MCMRSimulator.Simulations.Simulation</code></a></li><li><a href="#MCMRSimulator.Spins.FixedXoshiro"><code>MCMRSimulator.Spins.FixedXoshiro</code></a></li><li><a href="#MCMRSimulator.Spins.Snapshot"><code>MCMRSimulator.Spins.Snapshot</code></a></li><li><a href="#MCMRSimulator.Spins.Spin"><code>MCMRSimulator.Spins.Spin</code></a></li><li><a href="#MCMRSimulator.Spins.SpinOrientation"><code>MCMRSimulator.Spins.SpinOrientation</code></a></li><li><a href="#MCMRSimulator.Spins.SpinOrientationSum"><code>MCMRSimulator.Spins.SpinOrientationSum</code></a></li><li><a href="#MCMRSimulator.Subsets.Subset"><code>MCMRSimulator.Subsets.Subset</code></a></li><li><a href="#MCMRSimulator.Timestep.TimeController"><code>MCMRSimulator.Timestep.TimeController</code></a></li><li><a href="#MCMRSimulator.CLI.Geometry.get_parser-Tuple{}"><code>MCMRSimulator.CLI.Geometry.get_parser</code></a></li><li><a href="#MCMRSimulator.CLI.Geometry.parse_user_argument-Union{Tuple{T}, Tuple{MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue{T}, Any, Any}} where T"><code>MCMRSimulator.CLI.Geometry.parse_user_argument</code></a></li><li><a href="#MCMRSimulator.CLI.Geometry.run_main"><code>MCMRSimulator.CLI.Geometry.run_main</code></a></li><li><a href="#MCMRSimulator.CLI.Run.add_init_flags!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_init_flags!</code></a></li><li><a href="#MCMRSimulator.CLI.Run.add_output_flags!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_output_flags!</code></a></li><li><a href="#MCMRSimulator.CLI.Run.add_readout_flags!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_readout_flags!</code></a></li><li><a href="#MCMRSimulator.CLI.Run.add_simulation_definition!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_simulation_definition!</code></a></li><li><a href="#MCMRSimulator.CLI.Run.get_parser-Tuple{}"><code>MCMRSimulator.CLI.Run.get_parser</code></a></li><li><a href="#MCMRSimulator.CLI.Run.run_main"><code>MCMRSimulator.CLI.Run.run_main</code></a></li><li><a href="#MCMRSimulator.CLI.Sequence.run_main"><code>MCMRSimulator.CLI.Sequence.run_main</code></a></li><li><a href="#MCMRSimulator.Evolve.draw_step!-Union{Tuple{N}, Tuple{Spin{N}, Simulation{N, 0, G} where G&lt;:Tuple{}, StaticArraysCore.SVector{N, MCMRSimulator.Sequences.Main.SequencePart}, Float64}} where N"><code>MCMRSimulator.Evolve.draw_step!</code></a></li><li><a href="#MCMRSimulator.Evolve.evolve-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>MCMRSimulator.Evolve.evolve</code></a></li><li><a href="#MCMRSimulator.Evolve.evolve_to_time-Union{Tuple{N}, Tuple{Snapshot{N}, Simulation{N, NG} where NG, Float64}} where N"><code>MCMRSimulator.Evolve.evolve_to_time</code></a></li><li><a href="#MCMRSimulator.Evolve.readout-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>MCMRSimulator.Evolve.readout</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect-Tuple{BoundingBox{1}, AbstractVector, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Tuple{Any, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N} where N, StaticArraysCore.SVector{3}}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N} where N, StaticArraysCore.SVector{3}, MCMRSimulator.Geometries.Internal.Reflections.Reflection}} where L"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Gridify.get_indices-Tuple{MCMRSimulator.Geometries.Internal.Gridify.Grid, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.Gridify.get_indices</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.IsInsideMesh.isinside_grid-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, 3, R, MCMRSimulator.Geometries.Internal.Obstructions.Triangles.IndexTriangle, B, V, S} where {L, R, B, V, S}}"><code>MCMRSimulator.Geometries.Internal.IsInsideMesh.isinside_grid</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}, Tuple{Int64, Int64, Bool}}} where {L, N}"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.obstruction_type-Union{Tuple{Type{O}}, Tuple{O}} where O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.obstruction_type</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, BoundingBox{3}, Number}} where {L, N}"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection}"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.Triangles.detect_intersection_partial-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.Triangles.FullTriangle, StaticArraysCore.SVector{N}, StaticArraysCore.SVector{N}}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.Triangles.FullTriangle, StaticArraysCore.SVector{N}, StaticArraysCore.SVector{N}, Any}} where N"><code>MCMRSimulator.Geometries.Internal.Obstructions.Triangles.detect_intersection_partial</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.Triangles.normal-Tuple{AbstractVector, AbstractVector, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.Obstructions.Triangles.normal</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.Triangles.triangle_size-Tuple{Any, Any, Any}"><code>MCMRSimulator.Geometries.Internal.Obstructions.Triangles.triangle_size</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.dwell_time-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.dwell_time</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.max_timestep_sticking-Tuple{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Number}"><code>MCMRSimulator.Geometries.Internal.Properties.max_timestep_sticking</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.permeability-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.permeability</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.surface_density-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.surface_density</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.RayGridIntersection.ray_grid_intersections-Union{Tuple{N}, Tuple{StaticArraysCore.SVector{N, Float64}, StaticArraysCore.SVector{N, Float64}}} where N"><code>MCMRSimulator.Geometries.Internal.RayGridIntersection.ray_grid_intersections</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.direction-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection, Any, Any}"><code>MCMRSimulator.Geometries.Internal.Reflections.direction</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.has_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>MCMRSimulator.Geometries.Internal.Reflections.has_hit</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.previous_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>MCMRSimulator.Geometries.Internal.Reflections.previous_hit</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{2, Float64}}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{3, Float64}}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{2, Float64}}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility_gradient"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility_gradient</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.off_resonance_gradient-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility, Any}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.off_resonance_gradient</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.susceptibility_off_resonance-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility{L, N, O, R} where {O&lt;:MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility{N}, R&lt;:Union{Nothing, StaticArraysCore.SVector{N, Float64}}}, StaticArraysCore.SVector{3, Float64}}, Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility{L, N, O, R} where {O&lt;:MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility{N}, R&lt;:Union{Nothing, StaticArraysCore.SVector{N, Float64}}}, StaticArraysCore.SVector{3, Float64}, Union{Nothing, Bool}}} where {L, N}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.susceptibility_off_resonance</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.right_angle_triangle_field-Tuple{Number, Number, Number}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.right_angle_triangle_field</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Fix.apply_properties-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup, Vector{&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}, Int64, Int64}"><code>MCMRSimulator.Geometries.User.Fix.apply_properties</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Fix.fix-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.Fix.fix</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Fix.fix_type"><code>MCMRSimulator.Geometries.User.Fix.fix_type</code></a></li><li><a href="#MCMRSimulator.Geometries.User.FixSusceptibility.fix_susceptibility-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.FixSusceptibility.fix_susceptibility</code></a></li><li><a href="#MCMRSimulator.Geometries.User.JSON.read_geometry-Tuple{IO}"><code>MCMRSimulator.Geometries.User.JSON.read_geometry</code></a></li><li><a href="#MCMRSimulator.Geometries.User.JSON.write_geometry-Tuple{Any}"><code>MCMRSimulator.Geometries.User.JSON.write_geometry</code></a></li><li><a href="#MCMRSimulator.Geometries.User.LoadMesh.load_mesh-Tuple{IO}"><code>MCMRSimulator.Geometries.User.LoadMesh.load_mesh</code></a></li><li><a href="#MCMRSimulator.Geometries.User.LoadMesh.ply_from_mesh-Tuple{Any}"><code>MCMRSimulator.Geometries.User.LoadMesh.ply_from_mesh</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.Fields.convert_value-Union{Tuple{T}, Tuple{Type{T}, Any}} where T"><code>MCMRSimulator.Geometries.User.Obstructions.Fields.convert_value</code></a></li><li><a href="#MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.key_value_pairs"><code>MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.key_value_pairs</code></a></li><li><a href="#MCMRSimulator.Geometries.User.RandomDistribution.random_positions_radii-Tuple{Any, Real, Int64}"><code>MCMRSimulator.Geometries.User.RandomDistribution.random_positions_radii</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.connected_components"><code>MCMRSimulator.Geometries.User.SplitMesh.connected_components</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.connected_components-Tuple{SparseArrays.SparseMatrixCSC}"><code>MCMRSimulator.Geometries.User.SplitMesh.connected_components</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.connectivity_matrix"><code>MCMRSimulator.Geometries.User.SplitMesh.connectivity_matrix</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.curvature-NTuple{4, Any}"><code>MCMRSimulator.Geometries.User.SplitMesh.curvature</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.make_normals_consistent!-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.SplitMesh.make_normals_consistent!</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.neighbours-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.SplitMesh.neighbours</code></a></li><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.split_mesh-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Mesh}}"><code>MCMRSimulator.Geometries.User.SplitMesh.split_mesh</code></a></li><li><a href="#MCMRSimulator.Methods.B0"><code>MCMRSimulator.Methods.B0</code></a></li><li><a href="#MCMRSimulator.Methods.B0-Tuple{Scanner}"><code>MCMRSimulator.Methods.B0</code></a></li><li><a href="#MCMRSimulator.Methods.get_rotation-Tuple{Rotations.Rotation, Int64}"><code>MCMRSimulator.Methods.get_rotation</code></a></li><li><a href="#MCMRSimulator.Methods.get_time"><code>MCMRSimulator.Methods.get_time</code></a></li><li><a href="#MCMRSimulator.Methods.norm_angle-Tuple{Any}"><code>MCMRSimulator.Methods.norm_angle</code></a></li><li><a href="#MCMRSimulator.Methods.off_resonance-Tuple{RFPulse, Vararg{Any}}"><code>MCMRSimulator.Methods.off_resonance</code></a></li><li><a href="#MCMRSimulator.Methods.phase"><code>MCMRSimulator.Methods.phase</code></a></li><li><a href="#MCMRSimulator.Methods.phase-Tuple{RFPulse, Vararg{Any}}"><code>MCMRSimulator.Methods.phase</code></a></li><li><a href="#MCMRSimulator.Plot.Geometries.plot_geometry-Tuple"><code>MCMRSimulator.Plot.Geometries.plot_geometry</code></a></li><li><a href="#MCMRSimulator.Plot.Geometries.plot_geometry!-Tuple"><code>MCMRSimulator.Plot.Geometries.plot_geometry!</code></a></li><li><a href="#MCMRSimulator.Plot.Geometries.project_geometry-Union{Tuple{N}, Tuple{L}, Tuple{PlotPlane, MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}}} where {L, N}"><code>MCMRSimulator.Plot.Geometries.project_geometry</code></a></li><li><a href="#MCMRSimulator.Plot.OffResonance.plot_off_resonance-Tuple"><code>MCMRSimulator.Plot.OffResonance.plot_off_resonance</code></a></li><li><a href="#MCMRSimulator.Plot.OffResonance.plot_off_resonance!-Tuple"><code>MCMRSimulator.Plot.OffResonance.plot_off_resonance!</code></a></li><li><a href="#MCMRSimulator.Plot.PlotPlanes.project_on_grid-Tuple{PlotPlane, Snapshot{1}, Int64}"><code>MCMRSimulator.Plot.PlotPlanes.project_on_grid</code></a></li><li><a href="#MCMRSimulator.Plot.Sequences.sequence_plot"><code>MCMRSimulator.Plot.Sequences.sequence_plot</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.dyad_snapshot-Tuple"><code>MCMRSimulator.Plot.Snapshots.dyad_snapshot</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.dyad_snapshot!-Tuple"><code>MCMRSimulator.Plot.Snapshots.dyad_snapshot!</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.image_snapshot-Tuple"><code>MCMRSimulator.Plot.Snapshots.image_snapshot</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.image_snapshot!-Tuple"><code>MCMRSimulator.Plot.Snapshots.image_snapshot!</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.plot_snapshot"><code>MCMRSimulator.Plot.Snapshots.plot_snapshot</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.scatter_snapshot-Tuple"><code>MCMRSimulator.Plot.Snapshots.scatter_snapshot</code></a></li><li><a href="#MCMRSimulator.Plot.Snapshots.scatter_snapshot!-Tuple"><code>MCMRSimulator.Plot.Snapshots.scatter_snapshot!</code></a></li><li><a href="#MCMRSimulator.Plot.Trajectory.plot_trajectory2d-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory2d</code></a></li><li><a href="#MCMRSimulator.Plot.Trajectory.plot_trajectory2d!-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory2d!</code></a></li><li><a href="#MCMRSimulator.Plot.Trajectory.plot_trajectory3d-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory3d</code></a></li><li><a href="#MCMRSimulator.Plot.Trajectory.plot_trajectory3d!-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory3d!</code></a></li><li><a href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>MCMRSimulator.Plot.Utils.color</code></a></li><li><a href="#MCMRSimulator.Properties.R1"><code>MCMRSimulator.Properties.R1</code></a></li><li><a href="#MCMRSimulator.Properties.R2"><code>MCMRSimulator.Properties.R2</code></a></li><li><a href="#MCMRSimulator.Properties.correct_for_timestep-Tuple{Any, Any}"><code>MCMRSimulator.Properties.correct_for_timestep</code></a></li><li><a href="#MCMRSimulator.Properties.off_resonance"><code>MCMRSimulator.Properties.off_resonance</code></a></li><li><a href="#MCMRSimulator.Properties.stick_probability-NTuple{4, Number}"><code>MCMRSimulator.Properties.stick_probability</code></a></li><li><a href="#MCMRSimulator.Relax.relax!-Tuple{SpinOrientation, Real, Any, Any, Any}"><code>MCMRSimulator.Relax.relax!</code></a></li><li><a href="#MCMRSimulator.Relax.transfer!-Tuple{SpinOrientation, Float64}"><code>MCMRSimulator.Relax.transfer!</code></a></li><li><a href="#MCMRSimulator.Scanners.max_gradient"><code>MCMRSimulator.Scanners.max_gradient</code></a></li><li><a href="#MCMRSimulator.Scanners.max_slew_rate"><code>MCMRSimulator.Scanners.max_slew_rate</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.duration-Tuple{AbstractVector}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.duration</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.isempty_block-Tuple{AbstractVector}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.isempty_block</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.Diffusion.add_linear_diffusion_weighting-Tuple{Any, Any, Any}"><code>MCMRSimulator.SequenceBuilder.Diffusion.add_linear_diffusion_weighting</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.Diffusion.fit_time-NTuple{6, Any}"><code>MCMRSimulator.SequenceBuilder.Diffusion.fit_time</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.Sequences.GradientEcho.gradient_echo-Tuple{Any}"><code>MCMRSimulator.SequenceBuilder.Sequences.GradientEcho.gradient_echo</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.dwi-Tuple{}"><code>MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.dwi</code></a></li><li><a href="#MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.spin_echo-Tuple{Any}"><code>MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.spin_echo</code></a></li><li><a href="#MCMRSimulator.Sequences.Gradients.gradient-Tuple{MRGradients, Number}"><code>MCMRSimulator.Sequences.Gradients.gradient</code></a></li><li><a href="#MCMRSimulator.Sequences.Gradients.gradient-Tuple{AbstractVector, Sequence, Number}"><code>MCMRSimulator.Sequences.Gradients.gradient</code></a></li><li><a href="#MCMRSimulator.Sequences.Gradients.rotate_bvec-Tuple{AbstractVector{&lt;:Tuple{Real, Real}}, Any}"><code>MCMRSimulator.Sequences.Gradients.rotate_bvec</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.apply!-Tuple{InstantRFPulse, SpinOrientation}"><code>MCMRSimulator.Sequences.Instants.apply!</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.flip_angle-Tuple{RFPulse}"><code>MCMRSimulator.Sequences.Instants.flip_angle</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.flip_angle-Tuple{InstantRFPulse}"><code>MCMRSimulator.Sequences.Instants.flip_angle</code></a></li><li><a href="#MCMRSimulator.Sequences.Instants.phase-Tuple{InstantRFPulse}"><code>MCMRSimulator.Sequences.Instants.phase</code></a></li><li><a href="#MCMRSimulator.Sequences.JSON.read_sequence-Tuple{IO}"><code>MCMRSimulator.Sequences.JSON.read_sequence</code></a></li><li><a href="#MCMRSimulator.Sequences.JSON.write_sequence-Tuple{Any}"><code>MCMRSimulator.Sequences.JSON.write_sequence</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.current_gradient-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.current_gradient</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.current_instant-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.current_instant</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.current_pulse-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.current_pulse</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.next_gradient-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.next_gradient</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.next_instant-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.next_instant</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.next_pulse-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.next_pulse</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.previous_gradient-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.previous_gradient</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.previous_instant-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.previous_instant</code></a></li><li><a href="#MCMRSimulator.Sequences.Main.previous_pulse-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.previous_pulse</code></a></li><li><a href="#MCMRSimulator.Sequences.Methods.add_TR"><code>MCMRSimulator.Sequences.Methods.add_TR</code></a></li><li><a href="#MCMRSimulator.Sequences.Methods.add_TR-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number}"><code>MCMRSimulator.Sequences.Methods.add_TR</code></a></li><li><a href="#MCMRSimulator.Sequences.Methods.end_time"><code>MCMRSimulator.Sequences.Methods.end_time</code></a></li><li><a href="#MCMRSimulator.Sequences.Methods.start_time"><code>MCMRSimulator.Sequences.Methods.start_time</code></a></li><li><a href="#MCMRSimulator.Sequences.PulseQ.read_pulseq-Tuple{Any}"><code>MCMRSimulator.Sequences.PulseQ.read_pulseq</code></a></li><li><a href="#MCMRSimulator.Sequences.RadioFrequency.amplitude-Tuple{RFPulse, Vararg{Any}}"><code>MCMRSimulator.Sequences.RadioFrequency.amplitude</code></a></li><li><a href="#MCMRSimulator.Sequences.RadioFrequency.constant_pulse-Tuple{Number, Number, Number}"><code>MCMRSimulator.Sequences.RadioFrequency.constant_pulse</code></a></li><li><a href="#MCMRSimulator.Sequences.RadioFrequency.effective_pulse-Tuple{RFPulse, Number, Number}"><code>MCMRSimulator.Sequences.RadioFrequency.effective_pulse</code></a></li><li><a href="#MCMRSimulator.Sequences.RadioFrequency.effective_pulse-Tuple{Sequence, Number, Number}"><code>MCMRSimulator.Sequences.RadioFrequency.effective_pulse</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.sample-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number, Number}"><code>MCMRSimulator.Sequences.Shapes.sample</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.sample-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T"><code>MCMRSimulator.Sequences.Shapes.sample</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.sample_derivative-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T"><code>MCMRSimulator.Sequences.Shapes.sample_derivative</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}}, Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number, Number}} where T"><code>MCMRSimulator.Sequences.Shapes.sample_integral</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape, T, AbstractVector{T}}} where T&lt;:Number"><code>MCMRSimulator.Sequences.Shapes.sample_integral</code></a></li><li><a href="#MCMRSimulator.Sequences.Shapes.sample_integral_step"><code>MCMRSimulator.Sequences.Shapes.sample_integral_step</code></a></li><li><a href="#MCMRSimulator.Spins.get_sequence-Tuple{Spin, Any}"><code>MCMRSimulator.Spins.get_sequence</code></a></li><li><a href="#MCMRSimulator.Spins.longitudinal"><code>MCMRSimulator.Spins.longitudinal</code></a></li><li><a href="#MCMRSimulator.Spins.orientation"><code>MCMRSimulator.Spins.orientation</code></a></li><li><a href="#MCMRSimulator.Spins.position-Tuple{Snapshot}"><code>MCMRSimulator.Spins.position</code></a></li><li><a href="#MCMRSimulator.Spins.position-Tuple{Spin}"><code>MCMRSimulator.Spins.position</code></a></li><li><a href="#MCMRSimulator.Spins.property_values-Union{Tuple{T}, Tuple{Spin, Type{T}, Symbol, Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N}, Tuple{Spin, Type{T}, Symbol, Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, GlobalProperties}} where T"><code>MCMRSimulator.Spins.property_values</code></a></li><li><a href="#MCMRSimulator.Spins.stuck-Tuple{Spin}"><code>MCMRSimulator.Spins.stuck</code></a></li><li><a href="#MCMRSimulator.Spins.stuck_to-Tuple{Spin}"><code>MCMRSimulator.Spins.stuck_to</code></a></li><li><a href="#MCMRSimulator.Spins.stuck_to-Tuple{Spin, Any}"><code>MCMRSimulator.Spins.stuck_to</code></a></li><li><a href="#MCMRSimulator.Spins.transverse"><code>MCMRSimulator.Spins.transverse</code></a></li><li><a href="#MCMRSimulator.Subsets.get_subset-Tuple{Snapshot, Union{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Simulation}}"><code>MCMRSimulator.Subsets.get_subset</code></a></li><li><a href="#MCMRSimulator.Timestep.propose_times-Tuple{TimeController, Number, Number, AbstractVector{&lt;:Sequence}, Number}"><code>MCMRSimulator.Timestep.propose_times</code></a></li><li><a href="#MakieCore.plot!-Tuple{MakieCore.Combined{MCMRSimulator.Plot.Snapshots.dyad_snapshot}}"><code>MakieCore.plot!</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.MCMRSimulator" href="#MCMRSimulator.MCMRSimulator"><code>MCMRSimulator.MCMRSimulator</code></a> — <span class="docstring-category">Module</span></header><section><div><p>This package supports the running of MR Monte Carlo simulations.</p><p>In these simulations hundreds of thousands or millions of <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> particles randomly diffuse through some tissue microstructure. At each timepoint these spins are represented as a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> object. The spin diffusion is constrained by an <a href="@ref"><code>ObstructionGroup</code></a> (represented internally as <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>) The spins of these particles will be evolved based on the Bloch equations with the field strength and relaxation rates set by the local geometry and the effect of one or more <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> objects. All these variables are combined into a single <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> object.  See <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> for how to run the simulation.</p><p>Plotting support for the sequence and resulting signal is also available based on <a href="https://makie.juliaplots.org/stable/">Makie.jl</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/MCMRSimulator.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Constants.gyromagnetic_ratio" href="#MCMRSimulator.Constants.gyromagnetic_ratio"><code>MCMRSimulator.Constants.gyromagnetic_ratio</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>gyromagnetic ratio of a proton (1H) in water in kHz/T</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/constants.jl#L2">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods" href="#MCMRSimulator.Methods"><code>MCMRSimulator.Methods</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines methods shared across multiple sub-modules.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/methods.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.B0" href="#MCMRSimulator.Methods.B0"><code>MCMRSimulator.Methods.B0</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">B0(scanner)
B0(sequence)</code></pre><p>Returns the magnetic field strength of the scanner in Tesla.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/methods.jl#L19-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.get_rotation-Tuple{Rotations.Rotation, Int64}" href="#MCMRSimulator.Methods.get_rotation-Tuple{Rotations.Rotation, Int64}"><code>MCMRSimulator.Methods.get_rotation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_rotation(vector, ndim)</code></pre><p>Returns the (3, <code>ndim</code>) rotation matrix mapping the x-direction to <code>vector</code> (if <code>ndim</code> is 1) or the z-direction to <code>vector</code> (if <code>ndim</code> is 3). Vector can be a length 3 array or one of the symbols :x, :y, or :z (representing vectors in those cardinal directions).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/methods.jl#L49-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.get_time" href="#MCMRSimulator.Methods.get_time"><code>MCMRSimulator.Methods.get_time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_time(snapshot)
get_time(sequence_component)
get_time(sequence, sequence_index)</code></pre><p>Returns the time in milliseconds that a snapshot was taken or that a sequence component will have effect.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/methods.jl#L10-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.norm_angle-Tuple{Any}" href="#MCMRSimulator.Methods.norm_angle-Tuple{Any}"><code>MCMRSimulator.Methods.norm_angle</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">norm_angle(angle)</code></pre><p>Normalises an angle in degrees, so that it is between it is in the range (-180, 180]</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/methods.jl#L33-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners" href="#MCMRSimulator.Scanners"><code>MCMRSimulator.Scanners</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Define general <a href="#MCMRSimulator.Scanners.Scanner"><code>Scanner</code></a> type and methods as well as some concrete scanners.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners.Siemens_Connectom" href="#MCMRSimulator.Scanners.Siemens_Connectom"><code>MCMRSimulator.Scanners.Siemens_Connectom</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Siemens 3T Connectom MRI scanner (<a href="../references/#fan22_MappingHumanConnectome">(Fan *et al.*, 2022)</a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L75-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners.Siemens_Prisma" href="#MCMRSimulator.Scanners.Siemens_Prisma"><code>MCMRSimulator.Scanners.Siemens_Prisma</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Siemens MAGNETOM 3T Prisma MRI scanner (https://www.siemens-healthineers.com/en-uk/magnetic-resonance-imaging/3t-mri-scanner/magnetom-prisma).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L65-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners.Siemens_Terra" href="#MCMRSimulator.Scanners.Siemens_Terra"><code>MCMRSimulator.Scanners.Siemens_Terra</code></a> — <span class="docstring-category">Constant</span></header><section><div><p>Siemens MAGNETOM 7T Terra MRI scanner (https://www.siemens-healthineers.com/en-uk/magnetic-resonance-imaging/7t-mri-scanner/magnetom-terra)</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L70-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners.Scanner" href="#MCMRSimulator.Scanners.Scanner"><code>MCMRSimulator.Scanners.Scanner</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Scanner(;B0=3., gradient=Inf, slew_rate=Inf, units=:kHz)</code></pre><p>Properties of an MRI scanner relevant for the MR signal simulations.</p><ul><li><a href="#MCMRSimulator.Methods.B0"><code>B0</code></a>: magnetic field strength (in Tesla)</li><li><a href="#MCMRSimulator.Scanners.max_gradient"><code>max_gradient</code></a>: maximum gradient strength long each axis.</li><li><a href="#MCMRSimulator.Scanners.max_slew_rate"><code>max_slew_rate</code></a>: maximum rate of change in the gradient strength</li></ul><p>By default <code>gradient</code> and <code>slew_rate</code> are expected to be provided in units of, respectively, kHz/um and kHz/um/ms. However, if the keyword <code>units=:Tesla</code> is set, the <code>gradient</code> and <code>slew_rate</code> should be provided in units of, respectively, mT/m and T/m/s.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L7-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.B0-Tuple{Scanner}" href="#MCMRSimulator.Methods.B0-Tuple{Scanner}"><code>MCMRSimulator.Methods.B0</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">B0(scanner)
B0(sequence)</code></pre><p>Returns the magnetic field strength of the scanner in Tesla.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L40-L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners.max_gradient" href="#MCMRSimulator.Scanners.max_gradient"><code>MCMRSimulator.Scanners.max_gradient</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">max_gradient(scanner[, units])</code></pre><p>Returns the maximum magnetic field gradient of the scanner in kHz/um. By setting <code>units</code> to :Tesla, the gradient strength can be returned in mT/m instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L48-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Scanners.max_slew_rate" href="#MCMRSimulator.Scanners.max_slew_rate"><code>MCMRSimulator.Scanners.max_slew_rate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">max_slew_rate(scanner[, units])</code></pre><p>Returns the maximum magnetic field slew rate of the scanner in kHz/um/ms. By setting <code>units</code> to :Tesla, the slew rate can be returned in T/m/s instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/scanners.jl#L56-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties" href="#MCMRSimulator.Properties"><code>MCMRSimulator.Properties</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Properties.GlobalProperties"><code>GlobalProperties</code></a></li></ul><p>Methods:</p><ul><li><a href="#MCMRSimulator.Properties.R1"><code>R1</code></a></li><li><a href="#MCMRSimulator.Properties.R2"><code>R2</code></a></li><li><a href="#MCMRSimulator.Properties.off_resonance"><code>off_resonance</code></a></li><li><a href="@ref"><code>permeability</code></a></li><li><a href="@ref"><code>surface_relaxivity</code></a></li><li><a href="@ref"><code>surface_density</code></a></li><li><a href="@ref"><code>dwell_time</code></a></li><li><a href="#MCMRSimulator.Properties.correct_for_timestep-Tuple{Any, Any}"><code>correct_for_timestep</code></a></li><li><a href="#MCMRSimulator.Properties.stick_probability-NTuple{4, Number}"><code>stick_probability</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/properties.jl#L1-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties.GlobalProperties" href="#MCMRSimulator.Properties.GlobalProperties"><code>MCMRSimulator.Properties.GlobalProperties</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">GlobalProperties(; R1=0, R2=0, off_resonance=0, permeability=0, dwell_time=0, surface_density=0, surface_relaxivity=0)</code></pre><p>Stores global MRI and collision properties.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/properties.jl#L18-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties.correct_for_timestep-Tuple{Any, Any}" href="#MCMRSimulator.Properties.correct_for_timestep-Tuple{Any, Any}"><code>MCMRSimulator.Properties.correct_for_timestep</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">correct_for_timestep(surface_relaxivity/permeability, timestep)</code></pre><p>Corrects the surface relaxivity or permeability for the variability in the timestep during the simulation.</p><p>In Monte Carlo simulations the rate of collisions depends on the size of the timestep. This means that as the timestep changes, the effect of surface relaxivity and permeability will depend on the timestep. This function corrects the surface relaxivity and permeability values, so that their effect does not depend on timestep. The user-provided surface relaxivity and permeability will be used unaltered if the timestep is 1 milliseconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/properties.jl#L54-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties.stick_probability-NTuple{4, Number}" href="#MCMRSimulator.Properties.stick_probability-NTuple{4, Number}"><code>MCMRSimulator.Properties.stick_probability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stick_probability(surface_density, dwell_time, diffusivity, timestep)
stick_probability(properties, diffusivity, timestep)</code></pre><p>Computes the probability of a spin getting stuck at the surface given a <a href="@ref"><code>surface_density</code></a> and <a href="@ref"><code>dwell_time</code></a> from a <a href="@ref"><code>CollisionProperties</code></a> as well as the diffusivity (in um^2/ms) and the timestep (in ms).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/properties.jl#L67-L74">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries" href="#MCMRSimulator.Geometries"><code>MCMRSimulator.Geometries</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines the microstructural environment with which the spins interact.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/geometries.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User" href="#MCMRSimulator.Geometries.User"><code>MCMRSimulator.Geometries.User</code></a> — <span class="docstring-category">Module</span></header><section><div><p>User interface for defining geometry.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/user.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Annuli" href="#MCMRSimulator.Geometries.User.Obstructions.Annuli"><code>MCMRSimulator.Geometries.User.Obstructions.Annuli</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Annuli})(; fields...)</code></pre><p>Creates a set of Annulus objects. Fields can be set using keyword arguments. The following fields are available:</p><ul><li>inner: Radius of the inner cylinder. Field is required. Expected type: Float64.</li><li>outer: Radius of the outer cylinder. Field is required. Expected type: Float64.</li><li>myelin: Whether the annulus is myelinated. Field is required. Expected type: Bool.  default value: false</li><li>rotation: Rotation applied to all obstructions in group. Can be set to a matrix or one of :x, :y, or, :z (see <a href="@ref"><code>get_rotation</code></a>). Field is required. Expected type: StaticArraysCore.SMatrix{3, 2, Float64, 6}.  default value: [1.0 0.0; 0.0 1.0; 0.0 0.0]</li><li>grid_resolution: Resolution of the grid that the volume is split up into (um). Field is required. Expected type: Float64.  default value: 1.0</li><li>R1_inner_surface: Additional longitudinal relaxation rate (kHz). Inner_surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R1_outer_surface: Additional longitudinal relaxation rate (kHz). Outer_surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R1_inner_volume: Additional longitudinal relaxation rate (kHz). Inner_volume property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R1_outer_volume: Additional longitudinal relaxation rate (kHz). Outer_volume property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_inner_surface: Additional transverse relaxation rate (kHz). Inner_surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_outer_surface: Additional transverse relaxation rate (kHz). Outer_surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_inner_volume: Additional transverse relaxation rate (kHz). Inner_volume property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_outer_volume: Additional transverse relaxation rate (kHz). Outer_volume property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_inner_surface: Additional off-resonance field offset (kHz). Inner_surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_outer_surface: Additional off-resonance field offset (kHz). Outer_surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_inner_volume: Additional off-resonance field offset (kHz). Inner_volume property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_outer_volume: Additional off-resonance field offset (kHz). Outer_volume property. Field is required. Expected type: Float64.  default value: 0.0</li><li>position: Spatial offset of obstruction from origin. Field is required. Expected type: StaticArraysCore.MVector{2, Float64}.  default value: [0.0, 0.0]</li><li>susceptibility_iso: Isotropic component of the myelin susceptibility (in ppm). Field can be null. Expected type: Float64.  default value: -0.1</li><li>susceptibility_aniso: Ansotropic component of the myelin susceptibility (in ppm). Field can be null. Expected type: Float64.  default value: -0.1</li><li>lorentz_radius: Only compute field explicitly for a annuli with this Lorentz radius. Field can be null. Expected type: Float64.  default value: 5.0</li><li>repeats: Length scale on which the obstructions are repeated (um). Field can be null. Expected type: StaticArraysCore.MVector{2, Float64}.</li><li>use_boundingbox: Use bounding boxes for an initial filtering of possible intersections. Field can be null. Expected type: Bool.  default value: true</li><li>dwell_time_inner_surface: Average time a particle stays stuck to the surface (ms). Inner_surface property. Field can be null. Expected type: Float64.</li><li>dwell_time_outer_surface: Average time a particle stays stuck to the surface (ms). Outer_surface property. Field can be null. Expected type: Float64.</li><li>density_inner_surface: Surface density of stuck particles relative to the volume density (um). Inner_surface property. Field can be null. Expected type: Float64.</li><li>density_outer_surface: Surface density of stuck particles relative to the volume density (um). Outer_surface property. Field can be null. Expected type: Float64.</li><li>permeability_inner_surface: Probability of particle passing through the obstruction. Inner_surface property. Field can be null. Expected type: Float64.</li><li>permeability_outer_surface: Probability of particle passing through the obstruction. Outer_surface property. Field can be null. Expected type: Float64.</li><li>relaxivity_inner_surface: Fraction of transverse spin lost each time it hits the obstruction. Inner_surface property. Field can be null. Expected type: Float64.</li><li>relaxivity_outer_surface: Fraction of transverse spin lost each time it hits the obstruction. Outer_surface property. Field can be null. Expected type: Float64.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstructions.jl#L68-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Cylinders" href="#MCMRSimulator.Geometries.User.Obstructions.Cylinders"><code>MCMRSimulator.Geometries.User.Obstructions.Cylinders</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Cylinders})(; fields...)</code></pre><p>Creates a set of Cylinder objects. Fields can be set using keyword arguments. The following fields are available:</p><ul><li>radius: Radius of the cylinder. Field is required. Expected type: Float64.</li><li>rotation: Rotation applied to all obstructions in group. Can be set to a matrix or one of :x, :y, or, :z (see <a href="@ref"><code>get_rotation</code></a>). Field is required. Expected type: StaticArraysCore.SMatrix{3, 2, Float64, 6}.  default value: [1.0 0.0; 0.0 1.0; 0.0 0.0]</li><li>grid_resolution: Resolution of the grid that the volume is split up into (um). Field is required. Expected type: Float64.  default value: 1.0</li><li>R1_surface: Additional longitudinal relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R1_inside: Additional longitudinal relaxation rate (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_surface: Additional transverse relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_inside: Additional transverse relaxation rate (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_surface: Additional off-resonance field offset (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_inside: Additional off-resonance field offset (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>position: Spatial offset of obstruction from origin. Field is required. Expected type: StaticArraysCore.MVector{2, Float64}.  default value: [0.0, 0.0]</li><li>g_ratio: Inner/outer radius used for susceptibility calculation Field can be null. Expected type: Float64.  default value: 1.0</li><li>susceptibility_iso: Isotropic component of the susceptibility (in ppm). Field can be null. Expected type: Float64.  default value: -0.1</li><li>susceptibility_aniso: Ansotropic component of the susceptibility (in ppm). Field can be null. Expected type: Float64.  default value: -0.1</li><li>lorentz_radius: Only compute field explicitly for cylinders with this Lorentz radius. Field can be null. Expected type: Float64.  default value: 5.0</li><li>repeats: Length scale on which the obstructions are repeated (um). Field can be null. Expected type: StaticArraysCore.MVector{2, Float64}.</li><li>use_boundingbox: Use bounding boxes for an initial filtering of possible intersections. Field can be null. Expected type: Bool.  default value: true</li><li>dwell_time: Average time a particle stays stuck to the surface (ms). Surface property. Field can be null. Expected type: Float64.</li><li>density: Surface density of stuck particles relative to the volume density (um). Surface property. Field can be null. Expected type: Float64.</li><li>permeability: Probability of particle passing through the obstruction. Surface property. Field can be null. Expected type: Float64.</li><li>relaxivity: Fraction of transverse spin lost each time it hits the obstruction. Surface property. Field can be null. Expected type: Float64.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstructions.jl#L68-L94">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Mesh" href="#MCMRSimulator.Geometries.User.Obstructions.Mesh"><code>MCMRSimulator.Geometries.User.Obstructions.Mesh</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Mesh})(; fields...)</code></pre><p>Creates a set of Triangle objects. Fields can be set using keyword arguments. The following fields are available:</p><ul><li>triangles: Each triangle is defined by 3 vertices into the mesh. Field is required. Expected type: StaticArraysCore.MVector{3, Int64}.</li><li>vertices: Positions of the corners of the triangular mesh. Field is required. Expected type: Vector{StaticArraysCore.MVector{3, Float64}}.</li><li>myelin: Whether the mesh is myelinated. Field is required. Expected type: Bool.  default value: false</li><li>save_memory: If true the internal triangle representation will contain the indices of the vertices rather than the actual corner coordinates. This will save memory, but slow down the algorithm as more memory lookups will have to take place. Field is required. Expected type: Bool.  default value: true</li><li>rotation: Rotation applied to all obstructions in group. Can be set to a matrix or one of :x, :y, or, :z (see <a href="@ref"><code>get_rotation</code></a>). Field is required. Expected type: StaticArraysCore.SMatrix{3, 3, Float64, 9}.  default value: [1.0 0.0 0.0; 0.0 1.0 0.0; 0.0 0.0 1.0]</li><li>grid_resolution: Resolution of the grid that the volume is split up into (um). Field is required. Expected type: Float64.  default value: 1.0</li><li>R1_surface: Additional longitudinal relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R1_inside: Additional longitudinal relaxation rate (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_surface: Additional transverse relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_inside: Additional transverse relaxation rate (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_surface: Additional off-resonance field offset (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_inside: Additional off-resonance field offset (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>susceptibility_iso: Isotropic component of the myelin susceptibility (in ppm). Field can be null. Expected type: Float64.  default value: -0.1</li><li>susceptibility_aniso: Ansotropic component of the myelin susceptibility (in ppm). Field can be null. Expected type: Float64.  default value: -0.1</li><li>lorentz_radius: Only compute field explicitly for triangles with this Lorentz radius. Field can be null. Expected type: Float64.  default value: 5.0</li><li>repeats: Length scale on which the obstructions are repeated (um). Field can be null. Expected type: StaticArraysCore.MVector{3, Float64}.</li><li>use_boundingbox: Use bounding boxes for an initial filtering of possible intersections. Field can be null. Expected type: Bool.  default value: true</li><li>dwell_time: Average time a particle stays stuck to the surface (ms). Surface property. Field can be null. Expected type: Float64.</li><li>density: Surface density of stuck particles relative to the volume density (um). Surface property. Field can be null. Expected type: Float64.</li><li>permeability: Probability of particle passing through the obstruction. Surface property. Field can be null. Expected type: Float64.</li><li>relaxivity: Fraction of transverse spin lost each time it hits the obstruction. Surface property. Field can be null. Expected type: Float64.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstructions.jl#L68-L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Spheres" href="#MCMRSimulator.Geometries.User.Obstructions.Spheres"><code>MCMRSimulator.Geometries.User.Obstructions.Spheres</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Spheres})(; fields...)</code></pre><p>Creates a set of Sphere objects. Fields can be set using keyword arguments. The following fields are available:</p><ul><li>radius: Radius of the cylinder. Field is required. Expected type: Float64.</li><li>rotation: Rotation applied to all obstructions in group. Can be set to a matrix or one of :x, :y, or, :z (see <a href="@ref"><code>get_rotation</code></a>). Field is required. Expected type: StaticArraysCore.SMatrix{3, 3, Float64, 9}.  default value: [1.0 0.0 0.0; 0.0 1.0 0.0; 0.0 0.0 1.0]</li><li>grid_resolution: Resolution of the grid that the volume is split up into (um). Field is required. Expected type: Float64.  default value: 1.0</li><li>R1_surface: Additional longitudinal relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R1_inside: Additional longitudinal relaxation rate (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_surface: Additional transverse relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2_inside: Additional transverse relaxation rate (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_surface: Additional off-resonance field offset (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance_inside: Additional off-resonance field offset (kHz). Inside property. Field is required. Expected type: Float64.  default value: 0.0</li><li>position: Spatial offset of obstruction from origin. Field is required. Expected type: StaticArraysCore.MVector{3, Float64}.  default value: [0.0, 0.0, 0.0]</li><li>repeats: Length scale on which the obstructions are repeated (um). Field can be null. Expected type: StaticArraysCore.MVector{3, Float64}.</li><li>use_boundingbox: Use bounding boxes for an initial filtering of possible intersections. Field can be null. Expected type: Bool.  default value: true</li><li>dwell_time: Average time a particle stays stuck to the surface (ms). Surface property. Field can be null. Expected type: Float64.</li><li>density: Surface density of stuck particles relative to the volume density (um). Surface property. Field can be null. Expected type: Float64.</li><li>permeability: Probability of particle passing through the obstruction. Surface property. Field can be null. Expected type: Float64.</li><li>relaxivity: Fraction of transverse spin lost each time it hits the obstruction. Surface property. Field can be null. Expected type: Float64.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstructions.jl#L68-L90">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Walls" href="#MCMRSimulator.Geometries.User.Obstructions.Walls"><code>MCMRSimulator.Geometries.User.Obstructions.Walls</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Walls})(; fields...)</code></pre><p>Creates a set of Wall objects. Fields can be set using keyword arguments. The following fields are available:</p><ul><li>rotation: Rotation applied to all obstructions in group. Can be set to a matrix or one of :x, :y, or, :z (see <a href="@ref"><code>get_rotation</code></a>). Field is required. Expected type: StaticArraysCore.SMatrix{3, 1, Float64, 3}.  default value: [1.0; 0.0; 0.0;;]</li><li>grid_resolution: Resolution of the grid that the volume is split up into (um). Field is required. Expected type: Float64.  default value: 1.0</li><li>R1: Additional longitudinal relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>R2: Additional transverse relaxation rate (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>off_resonance: Additional off-resonance field offset (kHz). Surface property. Field is required. Expected type: Float64.  default value: 0.0</li><li>position: Spatial offset of obstruction from origin. Field is required. Expected type: Float64.  default value: 0.0</li><li>repeats: Length scale on which the obstructions are repeated (um). Field can be null. Expected type: StaticArraysCore.MVector{1, Float64}.</li><li>use_boundingbox: Use bounding boxes for an initial filtering of possible intersections. Field can be null. Expected type: Bool.  default value: true</li><li>dwell_time: Average time a particle stays stuck to the surface (ms). Surface property. Field can be null. Expected type: Float64.</li><li>density: Surface density of stuck particles relative to the volume density (um). Surface property. Field can be null. Expected type: Float64.</li><li>permeability: Probability of particle passing through the obstruction. Surface property. Field can be null. Expected type: Float64.</li><li>relaxivity: Fraction of transverse spin lost each time it hits the obstruction. Surface property. Field can be null. Expected type: Float64.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstructions.jl#L68-L86">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Fields.Field" href="#MCMRSimulator.Geometries.User.Obstructions.Fields.Field"><code>MCMRSimulator.Geometries.User.Obstructions.Fields.Field</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Field{T}(name::Symbol[, description::String[, default_value::T]]; per_surface=false, per_volume=false, only_group=false, required=false)</code></pre><p>Represents a property of an obstruction with:</p><ul><li><code>Type</code>: type of the property value (can also be Nothing unless <code>required</code> is true).</li><li><code>name</code>: name of the property.</li><li><code>description</code>: describes the property to the user.</li><li><code>default_value</code>: what the value is set to if not provided by the user.</li><li><code>per_surface</code>: can have a different value for each surface in the obstruction.</li><li><code>per_volume</code>: can have a different value within each enclosed volume of the obstruction.</li><li><code>required</code>: if true, the user has to provide a value, which cannot be nothing.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/fields.jl#L6-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue" href="#MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue"><code>MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FieldValue(field::Field{T}, n_obstructions, [, category::Symbol][, value])</code></pre><p>Represents the value for a specific field across a vector of obstructions. For fields with multiple values (one per volume or surface), <code>category</code> is required to set this. The current value is given by <code>value</code>. This has to be type <code>T</code> or a vector of type <code>T</code>. For a non-required field, it can also be nothing (or a vector containing nothings).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/fields.jl#L62-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.Fields.convert_value-Union{Tuple{T}, Tuple{Type{T}, Any}} where T" href="#MCMRSimulator.Geometries.User.Obstructions.Fields.convert_value-Union{Tuple{T}, Tuple{Type{T}, Any}} where T"><code>MCMRSimulator.Geometries.User.Obstructions.Fields.convert_value</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">convert_value(T, value, required::Bool)</code></pre><p>Convert <code>value</code> into type <code>T</code> or a vector of <code>T</code>. If required is false <code>value</code> can also be nothing or a vector containing <code>T</code> and nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/fields.jl#L33-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes" href="#MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes"><code>MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="@ref"><code>BaseObstruction</code></a></li><li><a href="@ref"><code>PropertiedObstruction</code></a></li></ul><p>Methods:</p><ul><li><a href="@ref"><code>has_inside</code></a></li><li><a href="@ref"><code>has_surface</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstruction_types.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.ObstructionType" href="#MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.ObstructionType"><code>MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.ObstructionType</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Defines individual obstruction types</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstruction_types.jl#L16-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.key_value_pairs" href="#MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.key_value_pairs"><code>MCMRSimulator.Geometries.User.Obstructions.ObstructionTypes.key_value_pairs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">key_value_pairs(obstruction_type, n_obstructions)</code></pre><p>Defines a mapping from symbols to <a href="#MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue"><code>FieldValue</code></a> objects.</p><p>Returns a type with:</p><ul><li>a sub-set of symbols that are enough to set all unique field values.</li><li>a mapping from symbols to field values.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/obstructions/obstruction_types.jl#L76-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Fix.apply_properties-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup, Vector{&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}, Int64, Int64}" href="#MCMRSimulator.Geometries.User.Fix.apply_properties-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup, Vector{&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}, Int64, Int64}"><code>MCMRSimulator.Geometries.User.Fix.apply_properties</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apply_properties(user_obstructions, internal_obstructions, index; surface, volume)</code></pre><p>Apply the generic obstruction properties defined in <code>user_obstruction</code> to <code>internal_obstructions</code>. This function applies (if appropriate):</p><ul><li>positional shifts</li><li>volumetic and surface-bound MRI properties</li><li>collision properties</li><li>rotation</li><li>repeats</li><li>mesh vertices</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/fix.jl#L97-L108">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Fix.fix-Tuple{AbstractVector}" href="#MCMRSimulator.Geometries.User.Fix.fix-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.Fix.fix</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fix(user_geometry; permeability=0., density=0., dwell_time=0., relaxivity=0.)</code></pre><p>Creates a fixed version of the user-created geometry that will be used internally by the simulator.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/fix.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.Fix.fix_type" href="#MCMRSimulator.Geometries.User.Fix.fix_type"><code>MCMRSimulator.Geometries.User.Fix.fix_type</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">fix_type(group::ObstructionGroup, index)</code></pre><p>Replace user <a href="@ref"><code>ObstructionGroup</code></a> objects with a <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</p><p>This needs to be defined for each sub-type of <a href="@ref"><code>ObstructionGroup</code></a>,     e.g. <a href="#MCMRSimulator.Geometries.User.Obstructions.Spheres"><code>Spheres</code></a>, <a href="#MCMRSimulator.Geometries.User.Obstructions.Annuli"><code>Annuli</code></a>, <a href="#MCMRSimulator.Geometries.User.Obstructions.Mesh"><code>Mesh</code></a>.</p><p>Shifts, collision properties, and volumetric and surface MRI properties can be added using <a href="#MCMRSimulator.Geometries.User.Fix.apply_properties-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup, Vector{&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}, Int64, Int64}"><code>apply_properties</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/fix.jl#L33-L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.FixSusceptibility.fix_susceptibility-Tuple{AbstractVector}" href="#MCMRSimulator.Geometries.User.FixSusceptibility.fix_susceptibility-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.FixSusceptibility.fix_susceptibility</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fix_susceptibility(geometry)</code></pre><p>Create a new <a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.FixedSusceptibility"><code>FixedSusceptibility</code></a> based on the user-defined geometry settings.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/fix_susceptibility.jl#L8-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.LoadMesh.load_mesh-Tuple{IO}" href="#MCMRSimulator.Geometries.User.LoadMesh.load_mesh-Tuple{IO}"><code>MCMRSimulator.Geometries.User.LoadMesh.load_mesh</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_mesh(file)</code></pre><p>Loads a <a href="#MCMRSimulator.Geometries.User.Obstructions.Mesh"><code>Mesh</code></a> from a file.</p><p>Currently only PLY files are supported (see <a href="#MCMRSimulator.Geometries.User.LoadMesh.ply_from_mesh-Tuple{Any}"><code>ply_from_mesh</code></a>)</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/load_mesh.jl#L23-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.LoadMesh.ply_from_mesh-Tuple{Any}" href="#MCMRSimulator.Geometries.User.LoadMesh.ply_from_mesh-Tuple{Any}"><code>MCMRSimulator.Geometries.User.LoadMesh.ply_from_mesh</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ply_from_mesh(file)</code></pre><p>Loads a <a href="#MCMRSimulator.Geometries.User.Obstructions.Mesh"><code>Mesh</code></a> from a PLY file. PLY stands for Polygon File Format (http://paulbourke.net/dataformats/ply/). PLY IO is handled by PlyIO.jl (https://github.com/JuliaGeometry/PlyIO.jl).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/load_mesh.jl#L4-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.RandomDistribution.random_positions_radii-Tuple{Any, Real, Int64}" href="#MCMRSimulator.Geometries.User.RandomDistribution.random_positions_radii-Tuple{Any, Real, Int64}"><code>MCMRSimulator.Geometries.User.RandomDistribution.random_positions_radii</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">random_positions_radii(box_size, target_density, n_dimensions; distribution=Gamma, mean=1., variance=1., max_iter=1000, min_radius=0.1, max_radius=Inf)</code></pre><p>Randomly distributes circles or spheres in space.</p><p>Arguments:</p><ul><li><code>box_size</code>: Size of the infinitely repeating box of random positions</li><li><code>target_density</code>: Final density of the circles/spheres. This density will only be approximately reached</li><li><code>n_dimensions</code>: dimensionality of the space (2 for cicles; 3 for spheres)</li><li><code>distribution</code>: distribution from which the radii are drawn (from <a href="https://juliastats.org/Distributions.jl/stable/">Distributions.jl</a>)</li><li><code>mean</code>: mean of the gamma distribution (ignored if <code>distribution</code> explicitly set)</li><li><code>variance</code>: variance of the gamma distribution (ignored if <code>distribution</code> explicitly set)</li><li><code>max_iter</code>: maximum number of iterations to try to prevent the circles/spheres from overlapping. An error is raised if they still overlap after this number of iterations.</li><li><code>min_radius</code>: samples from the distribution below this radius will be rejected (in um).</li><li><code>max_radius</code>: samples from the distribution above this radius will be rejected (in um).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/random_distribution.jl#L64-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh" href="#MCMRSimulator.Geometries.User.SplitMesh"><code>MCMRSimulator.Geometries.User.SplitMesh</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Mesh-specific operations to normalise and split a mesh.</p><ul><li><a href="#MCMRSimulator.Geometries.User.SplitMesh.split_mesh-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Mesh}}"><code>split_mesh</code></a>: applies all the normalisations and splitting</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.connected_components" href="#MCMRSimulator.Geometries.User.SplitMesh.connected_components"><code>MCMRSimulator.Geometries.User.SplitMesh.connected_components</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">connected_components(triangles)</code></pre><p>Splits the mesh represented by <code>triangles</code> into a sequences of meshes that are actually internally connected.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L130-L134">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.connected_components-Tuple{SparseArrays.SparseMatrixCSC}" href="#MCMRSimulator.Geometries.User.SplitMesh.connected_components-Tuple{SparseArrays.SparseMatrixCSC}"><code>MCMRSimulator.Geometries.User.SplitMesh.connected_components</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">connected_components(connectivity_matrix)</code></pre><p>Returns a vector of indices, where each connected component has been given a unique index (starting with 1).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L149-L153">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.connectivity_matrix" href="#MCMRSimulator.Geometries.User.SplitMesh.connectivity_matrix"><code>MCMRSimulator.Geometries.User.SplitMesh.connectivity_matrix</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">connectivity_matrix(triangles, nvertices)</code></pre><p>Create a nverticesxnvertices sparse boolean matrix, which is true for any connected vertices.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.curvature-NTuple{4, Any}" href="#MCMRSimulator.Geometries.User.SplitMesh.curvature-NTuple{4, Any}"><code>MCMRSimulator.Geometries.User.SplitMesh.curvature</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">curvature(triangles, vertices[index1, index2])</code></pre><p>Computes the curvature between two neighbouring triangles (<code>index1</code> and <code>index2</code>). If no indices are provided computes the curvature between any neighbouring triangles.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L200-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.make_normals_consistent!-Tuple{AbstractVector}" href="#MCMRSimulator.Geometries.User.SplitMesh.make_normals_consistent!-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.SplitMesh.make_normals_consistent!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">make_normals_consistent!(triangles)</code></pre><p>Adjust the triangles to all point outwards or all point inwards. Assumes that all the triangles are connected (can be enforced using <a href="#MCMRSimulator.Geometries.User.SplitMesh.connected_components"><code>connected_components</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L55-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.neighbours-Tuple{AbstractVector}" href="#MCMRSimulator.Geometries.User.SplitMesh.neighbours-Tuple{AbstractVector}"><code>MCMRSimulator.Geometries.User.SplitMesh.neighbours</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">neighbours(triangles)</code></pre><p>Return pairs of indices of triangles that share an edge.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L177-L181">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.SplitMesh.split_mesh-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Mesh}}" href="#MCMRSimulator.Geometries.User.SplitMesh.split_mesh-Tuple{MCMRSimulator.Geometries.User.Obstructions.ObstructionGroups.ObstructionGroup{:Mesh}}"><code>MCMRSimulator.Geometries.User.SplitMesh.split_mesh</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">split_mesh(mesh::Mesh)</code></pre><p>Returns a vector of meshes that have been adjusted in the following ways:</p><ol><li>the complete mesh has been split into its connected components.</li><li>the order of the indices in the triangles has been fixed, so that all normals point outwards.</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/split_mesh.jl#L14-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.JSON" href="#MCMRSimulator.Geometries.User.JSON"><code>MCMRSimulator.Geometries.User.JSON</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Supports I/O to and from json</p><p>Functions:</p><ul><li><a href="#MCMRSimulator.Geometries.User.JSON.write_geometry-Tuple{Any}"><code>write_geometry</code></a></li><li><a href="#MCMRSimulator.Geometries.User.JSON.read_geometry-Tuple{IO}"><code>read_geometry</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/json.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.JSON.read_geometry-Tuple{IO}" href="#MCMRSimulator.Geometries.User.JSON.read_geometry-Tuple{IO}"><code>MCMRSimulator.Geometries.User.JSON.read_geometry</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">read_geometry(filename/io)</code></pre><p>Read geometry from a JSON file.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/json.jl#L53-L57">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.User.JSON.write_geometry-Tuple{Any}" href="#MCMRSimulator.Geometries.User.JSON.write_geometry-Tuple{Any}"><code>MCMRSimulator.Geometries.User.JSON.write_geometry</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">write_geometry([io, ]geometry)</code></pre><p>Writes the user-defined geometry as a JSON file. If no IO is provided, the geometry is written to stdout.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/user/json.jl#L12-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal" href="#MCMRSimulator.Geometries.Internal"><code>MCMRSimulator.Geometries.Internal</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Internal representation of the tissue geometry.</p><p>All objects are immutable and optimised for both memory usage and computational speed.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/internal.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.RayGridIntersection" href="#MCMRSimulator.Geometries.Internal.RayGridIntersection"><code>MCMRSimulator.Geometries.Internal.RayGridIntersection</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Methods:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.RayGridIntersection.ray_grid_intersections-Union{Tuple{N}, Tuple{StaticArraysCore.SVector{N, Float64}, StaticArraysCore.SVector{N, Float64}}} where N"><code>ray_grid_intersections</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/ray_grid_intersection.jl#L1-L4">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.RayGridIntersection.ray_grid_intersections-Union{Tuple{N}, Tuple{StaticArraysCore.SVector{N, Float64}, StaticArraysCore.SVector{N, Float64}}} where N" href="#MCMRSimulator.Geometries.Internal.RayGridIntersection.ray_grid_intersections-Union{Tuple{N}, Tuple{StaticArraysCore.SVector{N, Float64}, StaticArraysCore.SVector{N, Float64}}} where N"><code>MCMRSimulator.Geometries.Internal.RayGridIntersection.ray_grid_intersections</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ray_grid_intersections(origin, destination)</code></pre><p>Computes all voxels crossed by a ray between <code>origin</code> and <code>destination</code> with a <a href="@ref"><code>GridShape</code></a> (default infinitely extending 1x1x1 grid). Both origin and destination are length-3 vectors. The returned object is an iterator returning a tuple with:</p><ul><li>N-length vector with the voxel that we are crossing through</li><li>Float with the time the ray entered voxel (0=<code>origin</code>, 1=<code>destination</code>)</li><li>N-length vector with position within voxel that the ray entered (i.e., numbers between 0 and 1)</li><li>Float with the time the ray left the voxel (0=<code>origin</code>, 1=<code>destination</code>)</li><li>N-length vector with position within voxel that the ray left (i.e., numbers between 0 and 1)</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/ray_grid_intersection.jl#L16-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>BoundingBox</code></a>: N-dimensional box fully containing an obstruction.</li></ul><p>Methods:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a>: returns whether point/spin is inside of bounding box</li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect-Tuple{BoundingBox{1}, AbstractVector, AbstractVector}"><code>could_intersect</code></a>: returns whether spin trajectory could intersect with obstruction in bounding box</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/bounding_boxes.jl#L1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BoundingBox(lower::Vector, upper::Vector)
BoundingBox([center::Vector, ]radius::Number)</code></pre><p>Represents a box in N-dimensional space.</p><p>Check whether particles are inside using <a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a>.</p><p>The main usage in the simulator is using <a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect-Tuple{BoundingBox{1}, AbstractVector, AbstractVector}"><code>could_intersect</code></a>,  which checks whether a spin trajectory <em>could</em> intersect with the obstruction in the bounding box.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/bounding_boxes.jl#L12-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect-Tuple{BoundingBox{1}, AbstractVector, AbstractVector}" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect-Tuple{BoundingBox{1}, AbstractVector, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.could_intersect</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">could_intersect(bounding_box, start, dest)</code></pre><p>Returns true if a line connecting <code>start</code> to <code>dest</code> could intersect with an obstruction in <code>bounding_box</code>. This function only does some very fast, high-level checks. Just because it returns true does not mean that there is an interesection of the obstruction (or even the bounding box) with the line. However, if it returns false, there is guaranteed to be no intersection.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/bounding_boxes.jl#L59-L66">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions" href="#MCMRSimulator.Geometries.Internal.Obstructions"><code>MCMRSimulator.Geometries.Internal.Obstructions</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines all the base obstructions supported by MCMRSimulator.</p><p>They are all sub-types of <a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>FixedObstruction</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/obstructions.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections" href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection"><code>ObstructionIntersection</code></a></li></ul><p>Attributes:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.empty_obstruction_intersections"><code>empty_obstruction_intersections</code></a></li></ul><p>Methods:</p><ul><li><a href="@ref"><code>no_intersection</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/obstruction_intersections.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.empty_obstruction_intersections" href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.empty_obstruction_intersections"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.empty_obstruction_intersections</code></a> — <span class="docstring-category">Constant</span></header><section><div><p><a href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection"><code>ObstructionIntersection</code></a> objects that indicate that no intersection was found.</p><p>This is a tuple with the ObstructionIntersection for 1, 2, or 3 dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/obstruction_intersections.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection" href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ObstructionIntersection{N}(distance, normal)</code></pre><p>Represents an intersection with a [<code>FixedObstruction</code>]{N}. Distance should be between 0 and 1 indicating where the obstruction intersects.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/obstruction_intersections.jl#L13-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection}" href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.ObstructionIntersection}"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">has_intersection(intersection)</code></pre><p>Return true if the intersection object represents a true intersection.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/obstruction_intersections.jl#L36-L40">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>FixedObstruction</code></a></li></ul><p>Methods:</p><ul><li><a href="@ref"><code>detect_collision</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside"><code>has_inside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius"><code>radius</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>BoundingBox</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.obstruction_type-Union{Tuple{Type{O}}, Tuple{O}} where O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>obstruction_type</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions"><code>random_surface_positions</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L1-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox-Union{Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}}, Tuple{N}} where N" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox-Union{Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}}, Tuple{N}} where N"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">BoundingBox(obstruction[, vertices])</code></pre><p>Returns the smallest bounding box that fully encloses the <a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>FixedObstruction</code></a>.</p><p><code>vertices</code> will only be provided for the [<code>IndexTriangle</code>] type.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L41-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Parent type of all individual obstructions.</p><p>N represents the intrinsic dimensionality of the obstruction (e.g., 1 for walls, 2 for cylinders, 3 for spheres/meshes)</p><p>Required interface for each obstruction:</p><ul><li><a href="@ref"><code>detect_collision</code></a>(obstruction, start, dest) -&gt; <a href="@ref"><code>Collision</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside"><code>has_inside</code></a>(obstruction_type) -&gt; Boolean</li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a>(obstruction, position) -&gt; Boolean</li><li>At least one of these two:<ul><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius"><code>radius</code></a>(obstruction): returns the radius of the obstruc</li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>BoundingBox</code></a>(obstruction): returns a Bounding box surrounding the obstruction</li></ul></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L18-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isinside(obstruction, position)</code></pre><p>Returns true if the <code>position</code> is inside the <code>obstruction</code>. This will be inaccurate if the particle with that position is stuck on the surface of the obstruction.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L71-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">detect_intersection(obstruction, start, dest[, inside])</code></pre><p>Determines whether the line from <code>start</code> to <code>dest</code> intersects with <code>obstruction</code>. If no intersection is found, <a href="@ref"><code>empty_obstruction_intersection</code></a> is returned. Otherwise a <a href="@ref"><code>ObstructionIntersection</code></a> object is returned.</p><p>If <code>inside</code> is set, the last collision in the trajectory was with this <code>obstruction</code>. <code>inside</code> indicates whether this previous collision was with the inside of the <code>obstruction</code>. This is passed on to prevent the particle from colliding with the same obstruction multiple times without any intermediate movement.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L51-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">has_inside(obstruction_type)</code></pre><p>Returns true if a particular sub-type of <a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>FixedObstruction</code></a> has an inside.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L64-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.obstruction_type-Union{Tuple{Type{O}}, Tuple{O}} where O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.obstruction_type-Union{Tuple{Type{O}}, Tuple{O}} where O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.obstruction_type</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">obstruction_type(obstruction/geometry)</code></pre><p>Returns the type of the obstruction that this geometry is built up out of</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L79-L83">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.radius</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">radius(cylinder/sphere...)</code></pre><p>Returns the radius of an obstruction.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L34-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">random_surface_positions(obstruction, surface_density)</code></pre><p>Returns a vector of positions and normals on the normals of a specific obstruction. Normals should always assume that the particle is on the inside.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L94-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">size_scale(obstruction/geometry)</code></pre><p>Returns the size scale of the smallest object within the geometry (typically the radius or the repeating length scale).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/fixed_obstructions.jl#L86-L90">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.Triangles.detect_intersection_partial-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.Triangles.FullTriangle, StaticArraysCore.SVector{N}, StaticArraysCore.SVector{N}}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.Triangles.FullTriangle, StaticArraysCore.SVector{N}, StaticArraysCore.SVector{N}, Any}} where N" href="#MCMRSimulator.Geometries.Internal.Obstructions.Triangles.detect_intersection_partial-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.Triangles.FullTriangle, StaticArraysCore.SVector{N}, StaticArraysCore.SVector{N}}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.Triangles.FullTriangle, StaticArraysCore.SVector{N}, StaticArraysCore.SVector{N}, Any}} where N"><code>MCMRSimulator.Geometries.Internal.Obstructions.Triangles.detect_intersection_partial</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Computes the intersection for a triangle in a mesh (returned by <a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection"><code>detect_intersection</code></a>). This function also returns an additional bool. This bool will be true if the intersection is exactly at the edge of the triangle.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/triangles.jl#L99-L103">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.Triangles.normal-Tuple{AbstractVector, AbstractVector, AbstractVector}" href="#MCMRSimulator.Geometries.Internal.Obstructions.Triangles.normal-Tuple{AbstractVector, AbstractVector, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.Obstructions.Triangles.normal</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">normal(p1, p2, p3)</code></pre><p>Computes the normal of a triangle formed by the three points</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/triangles.jl#L78-L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.Triangles.triangle_size-Tuple{Any, Any, Any}" href="#MCMRSimulator.Geometries.Internal.Obstructions.Triangles.triangle_size-Tuple{Any, Any, Any}"><code>MCMRSimulator.Geometries.Internal.Obstructions.Triangles.triangle_size</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">triangle_size(p1, p2, p3)</code></pre><p>Computes the size of a triangle formed by three points</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/triangles.jl#L66-L70">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.Shifts.Shift" href="#MCMRSimulator.Geometries.Internal.Obstructions.Shifts.Shift"><code>MCMRSimulator.Geometries.Internal.Obstructions.Shifts.Shift</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Shifts the obstruction <code>base</code> from the origin to <code>shift</code>.</p><p>The resulting object itself behaves like the base obstruction.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/obstructions/shifts.jl#L7-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Gridify.Grid" href="#MCMRSimulator.Geometries.Internal.Gridify.Grid"><code>MCMRSimulator.Geometries.Internal.Gridify.Grid</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Grid(obstructions, vertices, grid_resolution[, repeats])</code></pre><p>Predetermines the interactions between the obstructions and the grid. This is determined purely based on the bounding boxes (could be improved by considering the shape of each obstruction).</p><p>Attributes:</p><ul><li><code>lower</code>: lower left coordinate of the final grid (in um).</li><li><code>size</code>: size of the grid (in um).</li><li><code>resolution</code>: resolution of each element in the grid.</li><li><code>indices</code>: Vector of pairs of indices for each element in the grid. The first index indicates the index of the obstruction intersecting with the grid. The second index indicates the shift that should be applied to that obstruction (zero if there is no shift).</li><li><code>shifts</code>: Vector of the shifts that should be applied to obstructions to create a valid repeating grid.</li><li><code>repeating</code>: true if the grid is repeating.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/gridify.jl#L6-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Gridify.get_indices-Tuple{MCMRSimulator.Geometries.Internal.Gridify.Grid, AbstractVector}" href="#MCMRSimulator.Geometries.Internal.Gridify.get_indices-Tuple{MCMRSimulator.Geometries.Internal.Gridify.Grid, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.Gridify.get_indices</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_indices(grid, position)</code></pre><p>Get the indices of obstructions that contain the <code>position</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/gridify.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Reflections" href="#MCMRSimulator.Geometries.Internal.Reflections"><code>MCMRSimulator.Geometries.Internal.Reflections</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a></li></ul><p>Methods:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.direction-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection, Any, Any}"><code>direction</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.has_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>has_hit</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Reflections.previous_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>previous_hit</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Reflections.Reflection" href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>MCMRSimulator.Geometries.Internal.Reflections.Reflection</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Reflection(intersection, direction, timestep, ratio_displaced, time_moved, distance_moved, permeable=false)</code></pre><p>Represents a reflection of a particle after colliding.</p><p>Parameters:</p><ul><li>intersection: <a href="@ref"><code>Intersection</code></a> represents the intersection of the trajectory with an obstruction. This will supply:<ul><li><code>geometry_index</code>: index of the geometry that got hit.</li><li><code>obstruction_index</code>: index of the obstruction that got hit within the geometry.</li><li><code>inside</code>: whether the inside of the obstruction was hit.</li></ul></li><li><code>direction</code>: this is stored in an updated form if the obstruction is not permeable (i.e., we have an actual reflection) as indicated by the <code>permeable</code> parameter.</li><li><code>ratio_displaced</code>: how large the displacement drawn from the Gaussian distribution was relative to that expected for the timestep.   This is calculated as &quot;step_size / sqrt(timestep)&quot;.</li><li><code>time_moved</code>: how long the particle has already been moving since the last time it was free at the start of a timestep (in ms).</li><li><code>distance_moved</code>: how far the particle has already moved (in um).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L15-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Reflections.Reflection-Tuple{Any}" href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection-Tuple{Any}"><code>MCMRSimulator.Geometries.Internal.Reflections.Reflection</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Reflection(ratio_displaced)</code></pre><p>Creates a &quot;virtual&quot; Reflection that represents the movement of a free particle as drawn at the start of a timestep. It is used in <a href="@ref"><code>draw_step!</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L55-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}" href="#MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>MCMRSimulator.Geometries.Internal.Obstructions.ObstructionIntersections.has_intersection</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">has_intersection(reflection)</code></pre><p>Returns true if this reflection is not empty, i.e., it represents a real collision with an obstruction.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L63-L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Reflections.direction-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection, Any, Any}" href="#MCMRSimulator.Geometries.Internal.Reflections.direction-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection, Any, Any}"><code>MCMRSimulator.Geometries.Internal.Reflections.direction</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">direction(reflection, remaining_time)</code></pre><p>Returns the displacement that the spin should end up if it has <code>remaining_time</code> ms left in this timestep.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L87-L91">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Reflections.has_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}" href="#MCMRSimulator.Geometries.Internal.Reflections.has_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>MCMRSimulator.Geometries.Internal.Reflections.has_hit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">has_hit(reflection)</code></pre><p>Returns a tuple with the indices of the obstruction that the particle is reflecting off.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Reflections.previous_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}" href="#MCMRSimulator.Geometries.Internal.Reflections.previous_hit-Tuple{MCMRSimulator.Geometries.Internal.Reflections.Reflection}"><code>MCMRSimulator.Geometries.Internal.Reflections.previous_hit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">previous_hit(reflection)</code></pre><p>Returns a tuple with the details of the previous reflection relevant for <a href="@ref"><code>detect_intersection</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/reflections.jl#L80-L84">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.FixedObstructionGroups" href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups"><code>MCMRSimulator.Geometries.Internal.FixedObstructionGroups</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a></li><li><a href="@ref"><code>FixedObstructionGroup</code></a></li></ul><p>Methods:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.has_inside"><code>has_inside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection"><code>detect_intersection</code></a></li><li><a href="@ref"><code>property_values</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}"><code>size_scale</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L1-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup}" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup}"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">BoundingBox(obstruction_group)</code></pre><p>Finds the bounding box containing all the obstructions in the [<code>FixedObstructionGroup</code>] ignoring any repeats or rotation.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L123-L127">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry" href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FixedGeometry([obstruction_groups...])</code></pre><p>A collection of <a href="@ref"><code>FixedObstructionGroup</code></a> objects each reperesenting part of the geometry.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L69-L73">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">isinside(geometry, position[, stuck_reflection])</code></pre><p>Returns a vector of pairs of indices with all the obstructions in <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a> containing the <code>position</code> (in order). The first index indicates the index of the <a href="@ref"><code>FixedObstructionGroup</code></a> within the <code>geometry</code>. The second index is the index of the specific <a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction"><code>FixedObstruction</code></a> within the obstruction group.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L177-L183">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N} where N, StaticArraysCore.SVector{3}}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N} where N, StaticArraysCore.SVector{3}, MCMRSimulator.Geometries.Internal.Reflections.Reflection}} where L" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N} where N, StaticArraysCore.SVector{3}}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N} where N, StaticArraysCore.SVector{3}, MCMRSimulator.Geometries.Internal.Reflections.Reflection}} where L"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isinside(obstruction_group, position[, stuck_to])</code></pre><p>Returns a vector of indices with all the obstructions in <a href="@ref"><code>FixedObstructionGroup</code></a> containing the <code>position</code> (in order). For obstructions with only a single inside, will return an empty vector (&quot;[]&quot;) if the particle is outside and a &quot;[0]&quot; if inside.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L132-L137">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}, Tuple{Int64, Int64, Bool}}} where {L, N}" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, StaticArraysCore.SVector{3}, StaticArraysCore.SVector{3}, Tuple{Int64, Int64, Bool}}} where {L, N}"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.detect_intersection</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">detect_intersection(obstruction_group/geometry, start, dest[, previous_intersection])</code></pre><p>Find the closest intersection between the line from <code>start</code> to <code>dest</code> and an obstruction in the <code>geometry(ies)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L195-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, BoundingBox{3}, Number}} where {L, N}" href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}, BoundingBox{3}, Number}} where {L, N}"><code>MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.random_surface_positions</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">random_surface_positions(group/geometry, bounding_box, volume_density)</code></pre><p>Randomly draws positions on the surface within the <a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>BoundingBox</code></a>. The density of points will be equal to <code>surface_density</code> * <code>volume_density</code>, where <code>surface_density</code> is either set by the <code>group</code> itself or by <code>default_surface_density</code> (which should come from <a href="@ref"><code>GlobalProperties</code></a>).</p><p>For each drawn position will return a tuple with:</p><ul><li>position: 3D in um</li><li>surface normal: 3D, normalised (always pointing inwards)</li><li>geometry_index: index of the group</li><li>obstruction_index: index of the obstruction within the group that the position is on the surface of</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/fixed_obstruction_groups.jl#L306-L318">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties" href="#MCMRSimulator.Geometries.Internal.Properties"><code>MCMRSimulator.Geometries.Internal.Properties</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Methods to extract properties from the <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</p><p>Using <a href="#MCMRSimulator.Geometries.Internal.Properties.MRIProperties"><code>MRIProperties</code></a>:</p><ul><li><a href="#MCMRSimulator.Properties.R1"><code>R1</code></a></li><li><a href="#MCMRSimulator.Properties.R2"><code>R2</code></a></li><li><a href="#MCMRSimulator.Properties.off_resonance"><code>off_resonance</code></a></li></ul><p>Using <a href="@ref"><code>collision_property</code></a>:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Properties.permeability-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>permeability</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>surface_relaxivity</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.surface_density-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>surface_density</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.Properties.dwell_time-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>dwell_time</code></a></li></ul><p>Others:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Properties.max_timestep_sticking-Tuple{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Number}"><code>max_timestep_sticking</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L1-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties.MRIProperties" href="#MCMRSimulator.Geometries.Internal.Properties.MRIProperties"><code>MCMRSimulator.Geometries.Internal.Properties.MRIProperties</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MRIProperties(R1, R2, off_resonance)
MRIProperties(full_geometry, inside_geometry, global_properties, position, reflection)</code></pre><p>Determines the R1, R2, and off-resonance of a particle at given <code>position</code> and bound at <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L26-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties.dwell_time-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}" href="#MCMRSimulator.Geometries.Internal.Properties.dwell_time-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.dwell_time</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dwell_time(geometry, reflection)</code></pre><p>Returns the dwell_time experienced by the spin hitting the surface represented by a <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a>. The <code>geometry</code> has to be a <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L83-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties.max_timestep_sticking-Tuple{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Number}" href="#MCMRSimulator.Geometries.Internal.Properties.max_timestep_sticking-Tuple{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Number}"><code>MCMRSimulator.Geometries.Internal.Properties.max_timestep_sticking</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">max_timestep_sticking(geometry, diffusivity)</code></pre><p>Returns the maximum timestep that can be used while keeping <a href="#MCMRSimulator.Properties.stick_probability-NTuple{4, Number}"><code>stick_probability</code></a> lower than 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L108-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties.permeability-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}" href="#MCMRSimulator.Geometries.Internal.Properties.permeability-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.permeability</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">permeability(geometry, reflection)</code></pre><p>Returns the permeability experienced by the spin hitting the surface represented by a <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a>. The <code>geometry</code> has to be a <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L83-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties.surface_density-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}" href="#MCMRSimulator.Geometries.Internal.Properties.surface_density-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.surface_density</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">surface_density(geometry, reflection)</code></pre><p>Returns the surface_density experienced by the spin hitting the surface represented by a <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a>. The <code>geometry</code> has to be a <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L83-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}" href="#MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, Int64}"><code>MCMRSimulator.Geometries.Internal.Properties.surface_relaxivity</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">surface_relaxivity(geometry, reflection)</code></pre><p>Returns the surface_relaxivity experienced by the spin hitting the surface represented by a <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a>. The <code>geometry</code> has to be a <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/properties.jl#L83-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="@ref"><code>Susceptibility</code></a></li></ul><p>Methods:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility"><code>single_susceptibility</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/base.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BaseSusceptibility{N}</code></pre><p>Parent type of all susceptibility sources. Each <code>BaseSusceptibility</code> object represents a single susceptibility source in <code>N</code>-dimensional space  (e.g., N=2 for <a href="@ref"><code>CylinderSusceptibility</code></a> or N=3 for <a href="@ref"><code>PointSusceptibility</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/base.jl#L10-L16">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">single_susceptibility(source::BaseSusceptibility, offset, distance, stuck_to, b0_field)</code></pre><p>Computes the off-resonance field contribution from a <a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility"><code>BaseSusceptibility</code></a> source given:</p><ul><li><code>offset</code> vector from spin position to the centre of the <code>source</code></li><li><code>distance</code> of the spin from the source (which is the norm of <code>offset</code>)</li><li><code>stuck_to</code> tuple with the pair of indices that the particle is stuck to as well as a boolean indicating whether it is stuck to the inside.</li><li><code>b0_field</code> N-length vector with the magnetic field within the coordinate system of the susceptibility source</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/base.jl#L19-L27">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility_gradient" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility_gradient"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility_gradient</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">single_susceptibility_gradient(source::BaseSusceptibility)</code></pre><p>Maximal off-resonance gradient in ppm/um produced by a single susceptibility source.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/base.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Parent.FixedSusceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.FixedSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.FixedSusceptibility</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Tuple containing all susceptibility sources</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/parent.jl#L24-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ParentSusceptibility(base::BaseSusceptibility, rotation, repeats, lorentz_radius)</code></pre><p>Group of <code>L</code> <a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility"><code>BaseSusceptibility</code></a> susceptibility sources.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/parent.jl#L9-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Parent.off_resonance_gradient-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility, Any}" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.off_resonance_gradient-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility, Any}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.off_resonance_gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">off_resonance_gradient(susceptibility, B0)</code></pre><p>Maximum gradient of the off-resonance field in kHz/um due to the local susceptibility sources. Internally, computed for each susceptibility sources using <a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility_gradient"><code>single_susceptibility_gradient</code></a>. The maximum out of these is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/parent.jl#L93-L99">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Parent.susceptibility_off_resonance-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility{L, N, O, R} where {O&lt;:MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility{N}, R&lt;:Union{Nothing, StaticArraysCore.SVector{N, Float64}}}, StaticArraysCore.SVector{3, Float64}}, Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility{L, N, O, R} where {O&lt;:MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility{N}, R&lt;:Union{Nothing, StaticArraysCore.SVector{N, Float64}}}, StaticArraysCore.SVector{3, Float64}, Union{Nothing, Bool}}} where {L, N}" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.susceptibility_off_resonance-Union{Tuple{N}, Tuple{L}, Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility{L, N, O, R} where {O&lt;:MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility{N}, R&lt;:Union{Nothing, StaticArraysCore.SVector{N, Float64}}}, StaticArraysCore.SVector{3, Float64}}, Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility{L, N, O, R} where {O&lt;:MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility{N}, R&lt;:Union{Nothing, StaticArraysCore.SVector{N, Float64}}}, StaticArraysCore.SVector{3, Float64}, Union{Nothing, Bool}}} where {L, N}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Parent.susceptibility_off_resonance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">susceptibility_off_resonance(susceptibility/geometry, position[, inside])</code></pre><p>Computes the susceptibility off-resonance caused by a single <a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.BaseSusceptibility"><code>BaseSusceptibility</code></a>  or all the susceptibility sources in a <a href="@ref"><code>FixedGeometry</code></a> at the given position.</p><p>The field is computed in ppm. Knowledge of the scanner <a href="@ref"><code>B0</code></a> is needed to convert it into KHz.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/parent.jl#L29-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CylinderSusceptibility(radius, g_ratio, chi_I, chi_A, b0_field)</code></pre><p>Creates a cylindrical susceptibility source, which produces the intra- and extra-axonal field expected for a myelin sheath. More realistic myelin sheaths with a finite width can be modeled using <a href="@ref"><code>AnnulusSusceptibility</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/cylinder.jl#L5-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{2, Float64}}" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Cylinder.CylinderSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{2, Float64}}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">single_susceptibility(cylinder, position, distance, stuck_to, b0_field)</code></pre><p>Computed by the hollow cylinder fiber model from <a href="../references/#Wharton_2012">(Wharton and Bowtell, 2012)</a>. The myelin sheath is presumed to be an infinitely thin cylinder.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/cylinder.jl#L28-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AnnulusSusceptibility(inner_radius, outer_radius, chi_I, chi_A, b0_field)</code></pre><p>Creates an annular susceptibility source, which computes the off-resonance field expected for a myelin sheath.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/annulus.jl#L6-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{2, Float64}}" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Annulus.AnnulusSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{2, Float64}}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">single_susceptibility(annulus, position, distance, stuck_inside, b0_field)</code></pre><p>Computed by the hollow cylinder fiber model from <a href="../references/#Wharton_2012">(Wharton and Bowtell, 2012)</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/annulus.jl#L35-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Triangle" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Triangle"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Triangle</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Computes the off-resonance field produced by a triangular mesh:</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/triangle.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TriangleSusceptibility(full_triangle, chi_I, chi_A, b0_field)</code></pre><p>Computes the field produced by a triangular susceptibility source One triangle vertex is assumed to be at the origin.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/triangle.jl#L12-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{3, Float64}}" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.TriangleSusceptibility, AbstractVector, Number, Union{Nothing, Bool}, StaticArraysCore.SVector{3, Float64}}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Base.single_susceptibility</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">single_susceptibility(triangle, position, distance[, stuck_inside])</code></pre><p>Computed using the algorithm described in <a href="../references/#rubeckAnalyticalCalculationMagnet2013">(Rubeck *et al.*, 2013)</a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/triangle.jl#L71-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.right_angle_triangle_field-Tuple{Number, Number, Number}" href="#MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.right_angle_triangle_field-Tuple{Number, Number, Number}"><code>MCMRSimulator.Geometries.Internal.Susceptibility.Triangle.right_angle_triangle_field</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">right_angle_triangle_field(a, b, c)</code></pre><p>Returns the magnetic field experienced at (0, 0, z) generated by a triangle with edges (0, 0, 0), (a, 0, 0), (a, b, 0). The susceptibility of the triangle is assumed to be <span>$\sigma_m = 4 \pi \mu_0$</span>.</p><p>This uses equations 8-10 from <a href="../references/#rubeckAnalyticalCalculationMagnet2013">(Rubeck *et al.*, 2013)</a>. Note that these equations assume a and b to be positive.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/susceptibility/triangle.jl#L45-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.IsInsideMesh" href="#MCMRSimulator.Geometries.Internal.IsInsideMesh"><code>MCMRSimulator.Geometries.Internal.IsInsideMesh</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Special functions to determine if a particle is inside a mesh.</p><p>Functions:</p><ul><li><a href="#MCMRSimulator.Geometries.Internal.IsInsideMesh.isinside_grid-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, 3, R, MCMRSimulator.Geometries.Internal.Obstructions.Triangles.IndexTriangle, B, V, S} where {L, R, B, V, S}}"><code>isinside_grid</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/isinside_mesh.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.IsInsideMesh.isinside_grid-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, 3, R, MCMRSimulator.Geometries.Internal.Obstructions.Triangles.IndexTriangle, B, V, S} where {L, R, B, V, S}}" href="#MCMRSimulator.Geometries.Internal.IsInsideMesh.isinside_grid-Tuple{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, 3, R, MCMRSimulator.Geometries.Internal.Obstructions.Triangles.IndexTriangle, B, V, S} where {L, R, B, V, S}}"><code>MCMRSimulator.Geometries.Internal.IsInsideMesh.isinside_grid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isinside_grid(mesh)</code></pre><p>Determines for the centre of each voxel in <code>mesh.grid</code>, whether it lies inside or outside of the mesh. This function assumes that the mesh has been normalised (i.e., all normals point outwards).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/geometries/internal/isinside_mesh.jl#L19-L24">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins" href="#MCMRSimulator.Spins"><code>MCMRSimulator.Spins</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Types:</p><ul><li><a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a></li><li><a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a></li><li><a href="#MCMRSimulator.Spins.SpinOrientation"><code>SpinOrientation</code></a></li><li><a href="#MCMRSimulator.Spins.FixedXoshiro"><code>FixedXoshiro</code></a></li></ul><p>Methods:</p><ul><li><a href="#MCMRSimulator.Spins.longitudinal"><code>longitudinal</code></a></li><li><a href="#MCMRSimulator.Spins.transverse"><code>transverse</code></a></li><li><a href="#MCMRSimulator.Methods.phase"><code>phase</code></a></li><li><a href="#MCMRSimulator.Spins.orientation"><code>orientation</code></a></li><li><a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Union{Tuple{N}, Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, AbstractVector}} where N"><code>isinside</code></a></li><li><a href="@ref"><code>update_isinside</code></a></li><li><a href="#MCMRSimulator.Spins.stuck-Tuple{Spin}"><code>stuck</code></a></li><li><a href="#MCMRSimulator.Spins.stuck_to-Tuple{Spin, Any}"><code>stuck_to</code></a></li><li><a href="#MCMRSimulator.Spins.get_sequence-Tuple{Spin, Any}"><code>get_sequence</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L1-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.FixedXoshiro" href="#MCMRSimulator.Spins.FixedXoshiro"><code>MCMRSimulator.Spins.FixedXoshiro</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Immutable version of the Xoshiro random number generator state</p><p>Used to store the current state in the Spin object. To evolve the spin in a predictable manner set the seed using <code>copy!(spin.rng, Random.TaskLocalRNG)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L33-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.Snapshot" href="#MCMRSimulator.Spins.Snapshot"><code>MCMRSimulator.Spins.Snapshot</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Represents the positions and orientations of multiple <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> objects at a specific <code>time</code>.</p><p>Note that times are in milliseconds and positions in micrometer.  The equilibrium longitudinal spin (after T1 relaxation) is always 1.</p><p><strong>Useful constructors</strong></p><pre><code class="nohighlight hljs">Snapshot(positions; time=0., longitudinal=1., transverse=0., phase=0., nsequences=1)
Snapshot(nspins[, bounding_box[, geometry]]; time=0., longitudinal=1., transverse=0., phase=0., nsequences=1)
Snapshot(nspins, simulation[, bounding_box; time=0., longitudinal=1., transverse=0., phase=0., nsequences=1)</code></pre><p>Creates a new Snapshot at the given <code>time</code> with spins initialised for simulating <code>nsequences</code> sequences. All spins will start out in equilibrium, but that can be changed using the <code>longitudinal</code>, <code>transverse</code>, and/or <code>phase</code> flags. This initial spin locations are given by <code>positions</code> (Nx3 matrix or sequence of vectors of size 3). Alternatively the number of spins can be given in which case the spins are randomly distributed in the given <code>bounding_box</code> (default: 1x1x1 mm box centered on origin). The bounding_box can be a <a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>BoundingBox</code></a> object, a tuple with the lower and upper bounds (i.e., two vectors of length 3) or a number <code>r</code> (resulting in spins filling a cube from <code>-r</code> to <code>+r</code>)</p><pre><code class="nohighlight hljs">Snapshot(snap::Snapshot{1}, nsequences)</code></pre><p>Replicates the positions and orientations for a single sequence in the input snapshot across <code>nsequences</code>.</p><p><strong>Extracting summary information</strong></p><ul><li><a href="#MCMRSimulator.Spins.longitudinal"><code>longitudinal</code></a>(snapshot) to get the <code>nsequences</code> spin magnitudes in the z-direction (equilibrium of 1) averaged over all spins</li><li><a href="#MCMRSimulator.Spins.transverse"><code>transverse</code></a>(snapshot) to get the <code>nsequences</code> spin magnitudes in the x-y-plane averaged over all spins</li><li><a href="#MCMRSimulator.Methods.phase"><code>phase</code></a>(snapshot) to get the <code>nsequences</code> spin angles in x-y plane (in degrees) averaged over all spins</li><li><a href="#MCMRSimulator.Spins.orientation"><code>orientation</code></a>(snapshot) to get a (<code>nsequences</code>x3) matrix with the spin orientations in 3D space averaged over all spins</li><li><a href="#MCMRSimulator.Spins.SpinOrientation"><code>SpinOrientation</code></a>(snapshot) to get a <code>nsequences</code> vector of [<code>SpinOrientation</code>] objects with the average spin orientation across all spins</li><li><a href="#MCMRSimulator.Spins.position-Tuple{Snapshot}"><code>position</code></a>.(snapshot) to get a the position for each spin in a vector (no averaging applied)</li></ul><p>Information for a single sequence can be extracted by calling <a href="#MCMRSimulator.Spins.get_sequence-Tuple{Spin, Any}"><code>get_sequence</code></a> first.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L306-L336">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.Spin" href="#MCMRSimulator.Spins.Spin"><code>MCMRSimulator.Spins.Spin</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Spin particle with a position and <code>nsequences</code> spin orientations (stored as <a href="#MCMRSimulator.Spins.SpinOrientation"><code>SpinOrientation</code></a>).</p><p>A random number generator is stored in the <code>Spin</code> object as well, which will be used for evolving the spin into the future in a reproducible manner.</p><p><strong>Constructors</strong></p><pre><code class="nohighlight hljs">Spin(;nsequences=1, position=[0, 0, 0], longitudinal=1., transverse=0., phase=0.)</code></pre><p>Creates a new spin with <code>nsequences</code> identical spin orientations (given by <code>longitudinal</code>, <code>transverse</code>, and <code>phase</code> flags). The spin will start at given position.</p><pre><code class="nohighlight hljs">Spin(reference_spin::Spin{1}, nsequences)</code></pre><p>Create a new spin with the same position as <code>reference_spin</code> with the orientation of <code>reference_spin</code> replicated <code>nsequences</code> times.</p><p><strong>Extracting spin information</strong></p><ul><li><a href="#MCMRSimulator.Spins.longitudinal"><code>longitudinal</code></a> to get the <code>nsequences</code> spin magnitudes in the z-direction (equilibrium of 1)</li><li><a href="#MCMRSimulator.Spins.transverse"><code>transverse</code></a> to get the <code>nsequences</code> spin magnitudes in the x-y-plane</li><li><a href="#MCMRSimulator.Methods.phase"><code>phase</code></a> to get the <code>nsequences</code> spin angles in x-y plane (in degrees)</li><li><a href="#MCMRSimulator.Spins.orientation"><code>orientation</code></a> to get a (<code>nsequences</code>x3) matrix with the spin orientations in 3D space</li><li><a href="#MCMRSimulator.Spins.position-Tuple{Snapshot}"><code>position</code></a> to get a length-3 vector with spin location</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L92-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.SpinOrientation" href="#MCMRSimulator.Spins.SpinOrientation"><code>MCMRSimulator.Spins.SpinOrientation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SpinOrientation(longitudinal, transverse, phase)</code></pre><p>The spin orientation. Usually created as part of a <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> object.</p><pre><code class="nohighlight hljs">SpinOrientation(snapshot::Snapshot)</code></pre><p>Returns the average spin orientations of all <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> objects in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a>.</p><p>This information can be extracted using:</p><ul><li><a href="#MCMRSimulator.Spins.longitudinal"><code>longitudinal</code></a> to get the spin in the z-direction (equilibrium of 1)</li><li><a href="#MCMRSimulator.Spins.transverse"><code>transverse</code></a> to get the spin in the x-y-plane</li><li><a href="#MCMRSimulator.Methods.phase"><code>phase</code></a> to get the spin angle in x-y plane (in degrees)</li><li><a href="#MCMRSimulator.Spins.orientation"><code>orientation</code></a> to get the spin orientation as a length-3 vector</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L61-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.SpinOrientationSum" href="#MCMRSimulator.Spins.SpinOrientationSum"><code>MCMRSimulator.Spins.SpinOrientationSum</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SpinOrientationSum(snapshot)</code></pre><p>Computes the total signal and the number of spins in a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a>. The number of spins can be found by running <code>length(spin_orientation_sum)</code>. The spin orientation information can be found in the same way as for <a href="#MCMRSimulator.Spins.SpinOrientation"><code>SpinOrientation</code></a>, namely by calling <a href="#MCMRSimulator.Spins.transverse"><code>transverse</code></a>, <a href="#MCMRSimulator.Spins.longitudinal"><code>longitudinal</code></a>, or <a href="#MCMRSimulator.Methods.phase"><code>phase</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L399-L406">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Tuple{Any, AbstractVector}" href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside-Tuple{Any, AbstractVector}"><code>MCMRSimulator.Geometries.Internal.BoundingBoxes.isinside</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isinside([geometry, ]spin)</code></pre><p>Returns vector of obstructions that the spin is inside. If <code>geometry</code> is not provided, will return a vector of indices instead. If a non-fixed <code>geometry</code> is provided, will return the number of obstructions that the spin is inside.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L257-L263">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.phase" href="#MCMRSimulator.Methods.phase"><code>MCMRSimulator.Methods.phase</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">phase(spin)
phase(snapshot)</code></pre><p>Returns the phase in the x-y plane of the spin for a single particle (<a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a>) or averaged across a group of particles in a [<code>Snapshot</code>]. When orientations for multiple sequences are available  an array of phase values is returned with a value for each sequence.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L208-L214">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties.R1" href="#MCMRSimulator.Properties.R1"><code>MCMRSimulator.Properties.R1</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">R1(spin, geometry, global_properties)
R1(position, geometry, global_properties[, stuck_to])</code></pre><p>Returns the R1 experienced by the <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> given the surface and volume properties of the <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>. Alternatively, the <code>position</code> of the spin can be provided. In this case the <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a> should also be returned for a bound spin.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L290-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties.R2" href="#MCMRSimulator.Properties.R2"><code>MCMRSimulator.Properties.R2</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">R2(spin, geometry, global_properties)
R2(position, geometry, global_properties[, stuck_to])</code></pre><p>Returns the R2 experienced by the <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> given the surface and volume properties of the <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>. Alternatively, the <code>position</code> of the spin can be provided. In this case the <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a> should also be returned for a bound spin.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L290-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Properties.off_resonance" href="#MCMRSimulator.Properties.off_resonance"><code>MCMRSimulator.Properties.off_resonance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">off_resonance(spin, geometry, global_properties)
off_resonance(position, geometry, global_properties[, stuck_to])</code></pre><p>Returns the off_resonance experienced by the <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> given the surface and volume properties of the <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>. Alternatively, the <code>position</code> of the spin can be provided. In this case the <a href="#MCMRSimulator.Geometries.Internal.Reflections.Reflection"><code>Reflection</code></a> should also be returned for a bound spin.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L290-L296">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.get_sequence-Tuple{Spin, Any}" href="#MCMRSimulator.Spins.get_sequence-Tuple{Spin, Any}"><code>MCMRSimulator.Spins.get_sequence</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_sequence(spin, sequence_index)
get_sequence(snapshot, sequence_index)</code></pre><p>Extracts the spin orientation corresponding to a specific sequence, where the sequence index uses the order in which the sequences where provided in the <a href="@ref"><code>Simulation</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L241-L246">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.longitudinal" href="#MCMRSimulator.Spins.longitudinal"><code>MCMRSimulator.Spins.longitudinal</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">longitudinal(spin)
longitudinal(snapshot)</code></pre><p>Returns the longitudinal magnitude of the spin (i.e., magnitude aligned with the magnetic field) for a single particle (<a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a>) or averaged across a group of particles in a [<code>Snapshot</code>]. When orientations for multiple sequences are available an array of longitudinal values is returned with a value for each sequence.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L190-L196">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.orientation" href="#MCMRSimulator.Spins.orientation"><code>MCMRSimulator.Spins.orientation</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">orientation(spin)
orientation(snapshot)</code></pre><p>Returns the spin orientation as a length-3 vector for a single particle (<a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a>) or averaged across a group of particles in a [<code>Snapshot</code>]. When orientations for multiple sequences are available an array of vectors is returned with a value for each sequence.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L217-L223">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.position-Tuple{Snapshot}" href="#MCMRSimulator.Spins.position-Tuple{Snapshot}"><code>MCMRSimulator.Spins.position</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">position.(s::Snapshot)</code></pre><p>Returns all the positions of the spin particles as a vector of length-3 vectors.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L433-L437">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.position-Tuple{Spin}" href="#MCMRSimulator.Spins.position-Tuple{Spin}"><code>MCMRSimulator.Spins.position</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">position(s::Spin)</code></pre><p>Returns the position of the spin particle as a vector of length 3.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L250-L254">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.property_values-Union{Tuple{T}, Tuple{Spin, Type{T}, Symbol, Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N}, Tuple{Spin, Type{T}, Symbol, Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, GlobalProperties}} where T" href="#MCMRSimulator.Spins.property_values-Union{Tuple{T}, Tuple{Spin, Type{T}, Symbol, Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N}, Tuple{Spin, Type{T}, Symbol, Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, GlobalProperties}} where T"><code>MCMRSimulator.Spins.property_values</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">property_values(spin, T, symbol, geometry[, global_properties])</code></pre><p>Get sequence of values for property <code>symbol</code> of type <code>T</code> for the given <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a>. In order this will return:</p><ol><li>The surface MRI properties (only if the spin is stuck).</li><li>Any obstructions in the geometry that the spin is inside. These will be applied in the order that they appear in the <a href="#MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedGeometry"><code>FixedGeometry</code></a>.</li><li>The global property</li></ol><p>Any values of <code>nothing</code> will be filtered out.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L269-L278">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.stuck-Tuple{Spin}" href="#MCMRSimulator.Spins.stuck-Tuple{Spin}"><code>MCMRSimulator.Spins.stuck</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stuck(spin)</code></pre><p>Returns true if the spin is stuck on the surface. This can be used to filter a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> using:</p><pre><code class="language-julia hljs">only_stuck = filter(stuck, snapshot)
only_free = filter(s -&gt; !stuck(s), snapshot)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L142-L151">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.stuck_to-Tuple{Spin, Any}" href="#MCMRSimulator.Spins.stuck_to-Tuple{Spin, Any}"><code>MCMRSimulator.Spins.stuck_to</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stuck_to(spin, geometry)</code></pre><p>Return the internal representation of the obstruction the spin is stuck to. Raises an error if the spin is free.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L164-L169">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.stuck_to-Tuple{Spin}" href="#MCMRSimulator.Spins.stuck_to-Tuple{Spin}"><code>MCMRSimulator.Spins.stuck_to</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">stuck_to(spin)</code></pre><p>Return the indices of the obstruction the spin is stuck to. Will return (0, 0) for a free spin.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L154-L159">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Spins.transverse" href="#MCMRSimulator.Spins.transverse"><code>MCMRSimulator.Spins.transverse</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">transverse(spin)
transverse(snapshot)</code></pre><p>Returns the transverse spin (i.e., magnitude in the plane perpendicular to the magnetic field) for a single particle (<a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a>) or averaged across a group of particles in a [<code>Snapshot</code>]. When orientations for multiple sequences are available an array of transverse values is returned with a value for each sequence.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/spin.jl#L199-L205">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Methods" href="#MCMRSimulator.Sequences.Methods"><code>MCMRSimulator.Sequences.Methods</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines shared methods in the Sequence sub-module.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/methods.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Methods.add_TR" href="#MCMRSimulator.Sequences.Methods.add_TR"><code>MCMRSimulator.Sequences.Methods.add_TR</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">add_TR(shape/gradient/rf_pulse, TR)</code></pre><p>Shifts the generic [<code>Shape</code>], [<code>MRGradients</code>], or [<code>RFPulse</code>] by a time <code>TR</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/methods.jl#L22-L26">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Methods.end_time" href="#MCMRSimulator.Sequences.Methods.end_time"><code>MCMRSimulator.Sequences.Methods.end_time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">end_time(gradient/pulse)</code></pre><p>Find the time that the MR gradient or pulse ends. For instantaneous gradients/pulses this will also be <a href="#MCMRSimulator.Sequences.Methods.start_time"><code>start_time</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/methods.jl#L14-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Methods.start_time" href="#MCMRSimulator.Sequences.Methods.start_time"><code>MCMRSimulator.Sequences.Methods.start_time</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">start_time(gradient/pulse)</code></pre><p>Find the time that the MR gradient or pulse starts. For instantaneous gradients/pulses this will also be <a href="#MCMRSimulator.Sequences.Methods.end_time"><code>end_time</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/methods.jl#L6-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.InstantGradient" href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>MCMRSimulator.Sequences.Instants.InstantGradient</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">InstantGradient(; qvec=[0, 0, 0], q_origin=0, time=0.)</code></pre><p>Infinitely short gradient pulse that encodes phase information given by <code>qvec</code> (units: number of rotations/um) and <code>q_origin</code> (units: number of rotations).</p><p>The number of time a spins at given <code>position</code> is rotated is given by <code>qvec ⋅ position + q_origin</code>.</p><p>The pulse is applied at given <code>time</code> (in milliseconds). Retrieve this time using <a href="#MCMRSimulator.Methods.get_time"><code>get_time</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/instants.jl#L96-L104">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.InstantRFPulse" href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>MCMRSimulator.Sequences.Instants.InstantRFPulse</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">InstantRFPulse(;time=0., flip_angle=0., phase=0.)</code></pre><p>Instantaneous radio-frequency pulse that flips the spins by <code>flip_angle</code> degrees in a plane perpendicular to an axis in the x-y plane with an angle of <code>phase</code> degrees with respect to the x-axis at given <code>time</code>. Angles are in degrees and the <code>time</code> is in milliseconds. Angles can be retrieved using <a href="#MCMRSimulator.Sequences.Instants.flip_angle-Tuple{InstantRFPulse}"><code>flip_angle</code></a> and <a href="#MCMRSimulator.Sequences.Instants.phase-Tuple{InstantRFPulse}"><code>phase</code></a>. Time can be retrieved using <a href="#MCMRSimulator.Methods.get_time"><code>get_time</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/instants.jl#L11-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.Readout" href="#MCMRSimulator.Sequences.Instants.Readout"><code>MCMRSimulator.Sequences.Instants.Readout</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Readout(;time=0)</code></pre><p>Readout the spins at the given <code>time</code> (in milliseconds) each TR</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/instants.jl#L84-L88">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.apply!-Tuple{InstantRFPulse, SpinOrientation}" href="#MCMRSimulator.Sequences.Instants.apply!-Tuple{InstantRFPulse, SpinOrientation}"><code>MCMRSimulator.Sequences.Instants.apply!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">apply!(sequence_component, spin_orientation[, position])</code></pre><p>Applies given sequence component to the spin orientation. This updates the existing spin orientation. Some pulses (e.g., <a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>InstantGradient</code></a>) require positional information as well.</p><pre><code class="nohighlight hljs">apply!(sequence_components, spin)
apply!(sequence_components, snapshot)</code></pre><p>Apply all sequence components to the spin orientation in the <a href="#MCMRSimulator.Spins.Spin"><code>Spin</code></a> or to all the spins in <a href="@ref"><code>Snapshot</code></a>. Sequence components (see <a href="@ref"><code>Sequence</code></a>) can be <code>nothing</code> if there is no sequence component at this time.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/instants.jl#L57-L69">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.flip_angle-Tuple{InstantRFPulse}" href="#MCMRSimulator.Sequences.Instants.flip_angle-Tuple{InstantRFPulse}"><code>MCMRSimulator.Sequences.Instants.flip_angle</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">flip_angle(instant_pulse)</code></pre><p>Returns the flip angle of the <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> in degrees.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/instants.jl#L50-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.phase-Tuple{InstantRFPulse}" href="#MCMRSimulator.Sequences.Instants.phase-Tuple{InstantRFPulse}"><code>MCMRSimulator.Sequences.Instants.phase</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">phase(instant_pulse)</code></pre><p>Returns the angle in the x-y plane of the axis around with the <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> rotates in degrees.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/instants.jl#L43-L47">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.Shape" href="#MCMRSimulator.Sequences.Shapes.Shape"><code>MCMRSimulator.Sequences.Shapes.Shape</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Shape(times, amplitudes; normalise=false)</code></pre><p>Defines a <a href="#MCMRSimulator.Sequences.Shapes.Shape"><code>Shape</code></a> profile for an RF pulse or gradient profile. The <code>Shape</code> is parametrised by the number of control points <code>N</code> and the type of the amplitude object <code>T</code>. This amplitude type will be <code>Float64</code> for the amplitude and phase of the <a href="@ref"><code>RFPulse</code></a>. It will be <code>SVector{3, Float64}</code> for <a href="@ref"><code>MRGradients</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L4-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.ShapePart" href="#MCMRSimulator.Sequences.Shapes.ShapePart"><code>MCMRSimulator.Sequences.Shapes.ShapePart</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ShapePart(shape, t0, t1)</code></pre><p>Represents a small part of a <a href="#MCMRSimulator.Sequences.Shapes.Shape"><code>Shape</code></a> between <code>t0</code> and <code>t1</code> during which the amplitude varies linearly. This object is used to store the relevant part of the RF and gradient profiles within a single timestep (see <a href="@ref"><code>SequencePart</code></a>).</p><p>Like the full shape values can be extracted using <a href="#MCMRSimulator.Sequences.Shapes.sample-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number, Number}"><code>sample</code></a>, <a href="#MCMRSimulator.Sequences.Shapes.sample_derivative-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T"><code>sample_derivative</code></a>, <a href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}}, Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number, Number}} where T"><code>sample_integral</code></a>. The time passed on to these functions should be between 0 (for <code>t0</code>) and 1 (for <code>t1</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L167-L175">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Methods.add_TR-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number}" href="#MCMRSimulator.Sequences.Methods.add_TR-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number}"><code>MCMRSimulator.Sequences.Methods.add_TR</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_TR(shape/gradient/rf_pulse, TR)</code></pre><p>Shifts the generic [<code>Shape</code>], [<code>MRGradients</code>], or [<code>RFPulse</code>] by a time <code>TR</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L156-L160">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.sample-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number, Number}" href="#MCMRSimulator.Sequences.Shapes.sample-Tuple{MCMRSimulator.Sequences.Shapes.Shape, Number, Number}"><code>MCMRSimulator.Sequences.Shapes.sample</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sample(shape, t1, t2)</code></pre><p>Returns the average value of the shape between <code>t1</code> and <code>t2</code>.  See <a href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}}, Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number, Number}} where T"><code>sample_integral</code></a> to get the full integral.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L74-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.sample-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T" href="#MCMRSimulator.Sequences.Shapes.sample-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T"><code>MCMRSimulator.Sequences.Shapes.sample</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sample(shape, time)</code></pre><p>Returns the value of the shape at a given time using linear interpolation.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L56-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.sample_derivative-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T" href="#MCMRSimulator.Sequences.Shapes.sample_derivative-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}} where T"><code>MCMRSimulator.Sequences.Shapes.sample_derivative</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sample_derivative(shape, time[, later_time])</code></pre><p>Returns the derivative of the shape value at the specific time. At control points the derivative is always assumed to be the slope of the next block.</p><p>If <code>later_time</code> is provided the average derivative between both timepoints is computed.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L82-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}}, Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number, Number}} where T" href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}}, Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number, Number}} where T"><code>MCMRSimulator.Sequences.Shapes.sample_integral</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sample_integral(shape, t0, t1)</code></pre><p>Integrate the shape value from t0 to t1.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L115-L119">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape, T, AbstractVector{T}}} where T&lt;:Number" href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape, T, AbstractVector{T}}} where T&lt;:Number"><code>MCMRSimulator.Sequences.Shapes.sample_integral</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">sample_integral(shape, t0, times)</code></pre><p>Integrate the shape value from t0 to all the times in <code>times</code> (all assumed to be larger than <code>t0</code> and strictly increasing).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L140-L144">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.sample_integral_step" href="#MCMRSimulator.Sequences.Shapes.sample_integral_step"><code>MCMRSimulator.Sequences.Shapes.sample_integral_step</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">sample_integral_step(shape, index, t0=`start of block`, t1=`end of block`)</code></pre><p>Integrate the shape value from t0 to t1 assuming that both are within the single step (given by <code>index</code>). This is a helper function for <a href="#MCMRSimulator.Sequences.Shapes.sample_integral-Union{Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}}, Tuple{T}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number}, Tuple{MCMRSimulator.Sequences.Shapes.Shape{T}, Number, Number}} where T"><code>sample_integral</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/shapes.jl#L100-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Gradients.MRGradients" href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MCMRSimulator.Sequences.Gradients.MRGradients</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MRGradients(times, amplitudes; origin=[0, 0, 0])
MRGradients([(time0, amplitude0), (time1, amplitude1), ...]; origin=[0, 0, 0])</code></pre><p>Defines a gradient profile with the gradients (unit: kHz/um) linearly interpolated between the given times (unit: ms). Amplitudes can be a 3D vector or a single value. In the latter case the gradients are assumed to point in the z-direction (can be rotated using <a href="#MCMRSimulator.Sequences.Gradients.rotate_bvec-Tuple{AbstractVector{&lt;:Tuple{Real, Real}}, Any}"><code>rotate_bvec</code></a>). The gradients are centered on given <code>origin</code> (unit: um). They can be sampled using <a href="#MCMRSimulator.Sequences.Gradients.gradient-Tuple{MRGradients, Number}"><code>gradient</code></a>.</p><pre><code class="nohighlight hljs">MRGradients(Gx, Gy, Gz; origin=[0, 0, 0])</code></pre><p>Builds the MR gradients out of 3 <a href="#MCMRSimulator.Sequences.Shapes.Shape"><code>Shape</code></a> objects each describing the gradient profile in 1 dimension.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/gradients.jl#L7-L19">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Gradients.gradient-Tuple{MRGradients, Number}" href="#MCMRSimulator.Sequences.Gradients.gradient-Tuple{MRGradients, Number}"><code>MCMRSimulator.Sequences.Gradients.gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gradient([position, ]sequence/grad, time)
gradient([position, ]sequence/grad, t1, t2)</code></pre><p>Get gradient strength generated by <code>grad</code> (<a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MRGradients</code></a> object) at a specific <code>time</code> or averaged over a period between <code>t1</code> and <code>t2</code>. If no position is provided, the gradient is returned as a length-3 vector in units of mT/m. If a position is provided, the gradient is returned at that position as a float quantifying the off-resonance field in units of microTesla.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/gradients.jl#L68-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Gradients.rotate_bvec-Tuple{AbstractVector{&lt;:Tuple{Real, Real}}, Any}" href="#MCMRSimulator.Sequences.Gradients.rotate_bvec-Tuple{AbstractVector{&lt;:Tuple{Real, Real}}, Any}"><code>MCMRSimulator.Sequences.Gradients.rotate_bvec</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">rotate_bvec(gradients, bvec)</code></pre><p>Rotates the gradients in <code>gradients</code> to align with <code>bvec</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/gradients.jl#L85-L89">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.RadioFrequency.RFPulse" href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>MCMRSimulator.Sequences.RadioFrequency.RFPulse</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">RFPulse(times, amplitudes[, phases]; phase0=0, off_resonance=0)</code></pre><p>Creates a radio-frequency block between times <code>t0</code> and <code>t1</code>. At time <code>t0</code> the phase of the transverse B1 magnetic field is equal to <code>phase0</code> (given in degrees).</p><p>The amplitude and frequency modulation profile of the RF pulse are provided as functions:</p><ul><li>The amplitude represents the strength of the magnetic field in kHz within the transverse plane as a function of time (between t0 and t1). This should always be positive.</li><li>The phase represents the offset from the Larmor frequency in degrees as a function of time (between t0 and t1). If not provided explicitly, the phase is presumed to be a linear function starting with an initial <code>phase0</code> (in degrees) and increasing by the <code>off_resonance</code> (in kHz).</li></ul><p>The functions <a href="#MCMRSimulator.Sequences.RadioFrequency.amplitude-Tuple{RFPulse, Vararg{Any}}"><code>amplitude</code></a>, <a href="#MCMRSimulator.Methods.phase"><code>phase</code></a>, and <a href="#MCMRSimulator.Methods.off_resonance-Tuple{RFPulse, Vararg{Any}}"><code>off_resonance</code></a> are used to get the value at a specific <code>t</code> or averaged between two times. <a href="#MCMRSimulator.Sequences.Instants.flip_angle-Tuple{InstantRFPulse}"><code>flip_angle</code></a> computes the total flip angle for particles perfectly in phase with the RF pulse.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L8-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.off_resonance-Tuple{RFPulse, Vararg{Any}}" href="#MCMRSimulator.Methods.off_resonance-Tuple{RFPulse, Vararg{Any}}"><code>MCMRSimulator.Methods.off_resonance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">off_resonance(rf_pulse, t1[, t2])</code></pre><p>Computes the off<em>resonance of the <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> at time <code>t1</code> in kHz. If <code>t2</code> is also provided, the average off</em>resonance between times <code>t1</code> and <code>t2</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L71-L76">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Methods.phase-Tuple{RFPulse, Vararg{Any}}" href="#MCMRSimulator.Methods.phase-Tuple{RFPulse, Vararg{Any}}"><code>MCMRSimulator.Methods.phase</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">phase(rf_pulse, t1[, t2])</code></pre><p>Computes the phase of the <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> at time <code>t1</code> in degrees. If <code>t2</code> is also provided, the average phase between times <code>t1</code> and <code>t2</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L63-L68">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Instants.flip_angle-Tuple{RFPulse}" href="#MCMRSimulator.Sequences.Instants.flip_angle-Tuple{RFPulse}"><code>MCMRSimulator.Sequences.Instants.flip_angle</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">flip_angle(pulse)</code></pre><p>Computes the total flip angle of a <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> for spins that are in phase with the pulse.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L45-L49">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.RadioFrequency.amplitude-Tuple{RFPulse, Vararg{Any}}" href="#MCMRSimulator.Sequences.RadioFrequency.amplitude-Tuple{RFPulse, Vararg{Any}}"><code>MCMRSimulator.Sequences.RadioFrequency.amplitude</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">amplitude(rf_pulse, t1[, t2])</code></pre><p>Computes the amplitude of the <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> at time <code>t1</code> in kHz. If <code>t2</code> is also provided, the average amplitude between times <code>t1</code> and <code>t2</code> is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L55-L60">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.RadioFrequency.constant_pulse-Tuple{Number, Number, Number}" href="#MCMRSimulator.Sequences.RadioFrequency.constant_pulse-Tuple{Number, Number, Number}"><code>MCMRSimulator.Sequences.RadioFrequency.constant_pulse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">constant_pulse([t0=0, ]t1, flip_angle; phase0=0., off_resonance=0.)</code></pre><p>Creates an RF pulse with a constant amplitude resulting in given <code>flip_angle</code> (for spins at <code>off_resonance</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L97-L101">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.RadioFrequency.effective_pulse-Tuple{RFPulse, Number, Number}" href="#MCMRSimulator.Sequences.RadioFrequency.effective_pulse-Tuple{RFPulse, Number, Number}"><code>MCMRSimulator.Sequences.RadioFrequency.effective_pulse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">effective_pulse(RFPulse, t0, t1)
effective_pulse(sequence, t0, t1)</code></pre><p>Represents the effect of the RF pulse between times <code>t0</code> and <code>t1</code> as an <a href="@ref"><code>InstantRFPulse</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/radio_frequency.jl#L89-L94">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.Sequence" href="#MCMRSimulator.Sequences.Main.Sequence"><code>MCMRSimulator.Sequences.Main.Sequence</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Sequence(;TR, components=[], scanner=Scanner(B0), B0=3.)</code></pre><p>An MR sequence represented by a series of components repeated with a given repetition time (<code>TR</code>).</p><p>Possible sequence components are:</p><ul><li><a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a>: Radio-frequency pulse with user-provided amplitude and phase profile.</li><li><a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a>: instantaneous approximation of a radio-frequency pulse flipping the spin orientations.</li><li><a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MRGradients</code></a>: MRI gradient profiles</li><li><a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>InstantGradient</code></a>: instantaneous gradients encoding spatial patterns in the spin phase distribution.</li><li><a href="#MCMRSimulator.Sequences.Instants.Readout"><code>Readout</code></a>: Store the spins at this timepoint.</li></ul><p>The previous/current/next [<code>RFPulse</code>] at a specific time is given by <a href="#MCMRSimulator.Sequences.Main.previous_pulse-Tuple{Any, Any}"><code>previous_pulse</code></a>, <a href="#MCMRSimulator.Sequences.Main.current_pulse-Tuple{Any, Any}"><code>current_pulse</code></a>, or <a href="#MCMRSimulator.Sequences.Main.next_pulse-Tuple{Any, Any}"><code>next_pulse</code></a>.  Equivalent functions are available to [<code>MRGradients</code>] called <a href="#MCMRSimulator.Sequences.Main.previous_gradient-Tuple{Any, Any}"><code>previous_gradient</code></a>, <a href="#MCMRSimulator.Sequences.Main.current_gradient-Tuple{Any, Any}"><code>current_gradient</code></a>, or <a href="#MCMRSimulator.Sequences.Main.next_gradient-Tuple{Any, Any}"><code>next_gradient</code></a>. All of these will return <code>nothing</code> if there is no previous/current/next gradient/RF pulse.</p><p>The same functions exist for the previous/current/next instantaneous gradient/RF pulse (i.e., <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> or <a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>InstantGradient</code></a>), namely <a href="#MCMRSimulator.Sequences.Main.previous_instant-Tuple{Any, Any}"><code>previous_instant</code></a>, <a href="#MCMRSimulator.Sequences.Main.current_instant-Tuple{Any, Any}"><code>current_instant</code></a>, or <a href="#MCMRSimulator.Sequences.Main.next_instant-Tuple{Any, Any}"><code>next_instant</code></a>. </p><p>Note that all gradients/pulses repeat every <code>TR</code> milliseconds.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L12-L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.SequencePart" href="#MCMRSimulator.Sequences.Main.SequencePart"><code>MCMRSimulator.Sequences.Main.SequencePart</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SequencePart(sequence, t1, t2)</code></pre><p>Represents a small part of a <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> between times <code>t1</code> and <code>t2</code>. During this time the RF pulse and gradients are assumed to change linearly and hence can be represented as <a href="#MCMRSimulator.Sequences.Shapes.ShapePart"><code>ShapePart</code></a> objects. This is used to guide the spin evolution during the timestep between times <code>t1</code> and <code>t2</code> in the simulation.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L184-L190">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Gradients.gradient-Tuple{AbstractVector, Sequence, Number}" href="#MCMRSimulator.Sequences.Gradients.gradient-Tuple{AbstractVector, Sequence, Number}"><code>MCMRSimulator.Sequences.Gradients.gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gradient([position, ], sequence, t1)</code></pre><p>Gets the off-resonance field (units: kHz) at given <code>position</code> at time <code>t1</code>. If position is not supplied the MR gradient is returned as a vector (units: kHz/um).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L168-L173">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.current_gradient-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.current_gradient-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.current_gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">current_gradient(sequence, time)</code></pre><p>Returns the current <a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MRGradients</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no current gradient <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.current_instant-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.current_instant-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.current_instant</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">current_instant(sequence, time)</code></pre><p>Returns the current <a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>InstantGradient</code></a> or <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no current instant <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.current_pulse-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.current_pulse-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.current_pulse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">current_pulse(sequence, time)</code></pre><p>Returns the current <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no current pulse <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.next_gradient-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.next_gradient-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.next_gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">next_gradient(sequence, time)</code></pre><p>Returns the next <a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MRGradients</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no next gradient <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.next_instant-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.next_instant-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.next_instant</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">next_instant(sequence, time)</code></pre><p>Returns the next <a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>InstantGradient</code></a> or <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no next instant <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.next_pulse-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.next_pulse-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.next_pulse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">next_pulse(sequence, time)</code></pre><p>Returns the next <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no next pulse <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.previous_gradient-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.previous_gradient-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.previous_gradient</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">previous_gradient(sequence, time)</code></pre><p>Returns the previous <a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MRGradients</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no previous gradient <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.previous_instant-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.previous_instant-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.previous_instant</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">previous_instant(sequence, time)</code></pre><p>Returns the previous <a href="#MCMRSimulator.Sequences.Instants.InstantGradient"><code>InstantGradient</code></a> or <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no previous instant <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Main.previous_pulse-Tuple{Any, Any}" href="#MCMRSimulator.Sequences.Main.previous_pulse-Tuple{Any, Any}"><code>MCMRSimulator.Sequences.Main.previous_pulse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">previous_pulse(sequence, time)</code></pre><p>Returns the previous <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a> in the <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> relative to <code>time</code>. If there is no previous pulse <code>nothing</code> is returned instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L138-L143">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.RadioFrequency.effective_pulse-Tuple{Sequence, Number, Number}" href="#MCMRSimulator.Sequences.RadioFrequency.effective_pulse-Tuple{Sequence, Number, Number}"><code>MCMRSimulator.Sequences.RadioFrequency.effective_pulse</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">effective_pulse(sequence, t1, t2)</code></pre><p>Returns the <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a> that has the same effect as the radio-frequency pulses (<a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a>) in the provided sequence will have between <code>t1</code> and <code>t2</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/main.jl#L93-L97">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.Shapes.Shape-Tuple{MCMRSimulator.Sequences.PulseQ.CompressedPulseqShape}" href="#MCMRSimulator.Sequences.Shapes.Shape-Tuple{MCMRSimulator.Sequences.PulseQ.CompressedPulseqShape}"><code>MCMRSimulator.Sequences.Shapes.Shape</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Shape(shape::CompressedPulseqShape)</code></pre><p>Create a <code>Shape</code> object based on the pulseq Shape format.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/pulseq.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.PulseQ.read_pulseq-Tuple{Any}" href="#MCMRSimulator.Sequences.PulseQ.read_pulseq-Tuple{Any}"><code>MCMRSimulator.Sequences.PulseQ.read_pulseq</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">read_pulseq(filename; scanner=Scanner(B0=B0), B0=3., TR=&lt;sequence duration&gt;)</code></pre><p>Reads a sequence from a pulseq file (http://pulseq.github.io/). Pulseq files can be produced using matlab (http://pulseq.github.io/) or python (https://pypulseq.readthedocs.io/en/master/).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/pulseq.jl#L66-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.JSON" href="#MCMRSimulator.Sequences.JSON"><code>MCMRSimulator.Sequences.JSON</code></a> — <span class="docstring-category">Module</span></header><section><div><p>I/O for sequences using JSON format</p><p>Functions:</p><ul><li><code>write_sequence</code></li><li><code>read_sequence</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/json.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.JSON.read_sequence-Tuple{IO}" href="#MCMRSimulator.Sequences.JSON.read_sequence-Tuple{IO}"><code>MCMRSimulator.Sequences.JSON.read_sequence</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">read_sequence(filename/io)</code></pre><p>Read sequence from a JSON file.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/json.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Sequences.JSON.write_sequence-Tuple{Any}" href="#MCMRSimulator.Sequences.JSON.write_sequence-Tuple{Any}"><code>MCMRSimulator.Sequences.JSON.write_sequence</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">write_sequence([io, ]sequence)</code></pre><p>Writes the sequence as a JSON file. If no IO is provided, the sequence is written to stdout.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequences/json.jl#L20-L25">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock" href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">BuildingBlock(; components=vector of pulses/gradients, duration=minimum)</code></pre><p>Creates a sequence building block by overlapping zero or more pulses/gradients.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/building_blocks.jl#L5-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{AbstractVector}" href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{AbstractVector}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">BuildingBlock([building block like objects...])</code></pre><p>Creates a sequence building block by concatenating all the <a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock"><code>BuildingBlock</code></a>-like objects in the vector. Each building block will play out sequenctially.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/building_blocks.jl#L41-L46">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{Number}" href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{Number}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">BuildingBlock(delay::Number)</code></pre><p>Creates an empty sequence building block representing a delay of <code>delay</code> ms.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/building_blocks.jl#L25-L29">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{Union{Readout, MRGradients, MCMRSimulator.Sequences.Instants.InstantComponent, RFPulse}}" href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock-Tuple{Union{Readout, MRGradients, MCMRSimulator.Sequences.Instants.InstantComponent, RFPulse}}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">BuildingBlock(pulse/gradient)</code></pre><p>Creates an building block containing just the <a href="#MCMRSimulator.Sequences.RadioFrequency.RFPulse"><code>RFPulse</code></a>, <a href="@ref"><code>InstantRFPulse</code></a>, <a href="#MCMRSimulator.Sequences.Gradients.MRGradients"><code>MRGradients</code></a>, <a href="@ref"><code>InstantGradient</code></a>, or [<code>Readout</code>]. The duration will be set to the length of the pulse/gradient.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/building_blocks.jl#L32-L37">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.BuildingBlocks.duration-Tuple{AbstractVector}" href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.duration-Tuple{AbstractVector}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.duration</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">duration(building_block)</code></pre><p>Returns how long each sequence <a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock"><code>BuildingBlock</code></a> lasts.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/building_blocks.jl#L71-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.BuildingBlocks.isempty_block-Tuple{AbstractVector}" href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.isempty_block-Tuple{AbstractVector}"><code>MCMRSimulator.SequenceBuilder.BuildingBlocks.isempty_block</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">isempty_block(building_block)</code></pre><p>Returns whether a sequence <a href="#MCMRSimulator.SequenceBuilder.BuildingBlocks.BuildingBlock"><code>BuildingBlock</code></a> is empty (i.e., does not contain RF pulses, readouts or MRI gradients).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/building_blocks.jl#L83-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.Diffusion.add_linear_diffusion_weighting-Tuple{Any, Any, Any}" href="#MCMRSimulator.SequenceBuilder.Diffusion.add_linear_diffusion_weighting-Tuple{Any, Any, Any}"><code>MCMRSimulator.SequenceBuilder.Diffusion.add_linear_diffusion_weighting</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">add_linear_diffusion_weighting(blocks, replace1, replace2, refocus=true, bval/qval/gradient_strength, diffusion_time=max, gradient_duration=max, scanner=3T, orientation=:x)</code></pre><p>Replaces two empty <a href="@ref"><code>BuildingBlock</code></a>-like objects with diffusion-weighting gradients. Both diffusion-weighted gradients are identical trapezia. The second one will be flipped if <code>refocus</code> is set to false.</p><p>The other flags control the timings and size of the diffusion weighting. The timings are determined by:</p><ul><li><code>diffusion_time</code>: defaults to time between the start of the two blocks</li><li><code>gradient_duration</code>: defaults to the largest value possible. Setting the <code>gradient_duration</code> to zero will cause [<code>InstantGradient</code>] objects to be used.</li><li><code>ramp_time</code>: defaults to the maximum gradient / maximum slew rate of the scanner.</li></ul><p>The gradient strength is set by <code>bval</code>, <code>qval</code>, or <code>gradient_strength</code>. At least one of these should be provided.</p><p>By default, the timings of the existing <a href="@ref"><code>BuildingBlock</code></a> objects are respected. If <code>max_bval</code> or <code>max_qval</code> are set these timings are adjusted to the minimum duration required to reach that b-value or q-value.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/diffusion.jl#L7-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.Diffusion.fit_time-NTuple{6, Any}" href="#MCMRSimulator.SequenceBuilder.Diffusion.fit_time-NTuple{6, Any}"><code>MCMRSimulator.SequenceBuilder.Diffusion.fit_time</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">fit_time(duration1, duration_wait, duration2, gradient_duration, diffusion_time, ramp_time)</code></pre><p>Arranges the timing of gradients given the duration of gradient, diffusion time, ramp time, readout time and TE. By default it will try to arrange to gradients symmetrically arround the 180 degree pulse. If not feasible, it will make readout right after the rephasing gradient and calculate the dephasing gradient&#39;s timing based on the rephasing gradient.</p><p>This function is not supposed to be called individually! So no check for the arguments will happen, assuming all have been checked by <code>get_diffusion_trapeziums</code> and all will not be nothing.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/diffusion.jl#L150-L158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.Sequences.GradientEcho.gradient_echo-Tuple{Any}" href="#MCMRSimulator.SequenceBuilder.Sequences.GradientEcho.gradient_echo-Tuple{Any}"><code>MCMRSimulator.SequenceBuilder.Sequences.GradientEcho.gradient_echo</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">gradient_echo(TE; TR=&lt;TE&gt;, scanner=&lt;3T scanner&gt;, excitation_pulse=Instant, excitation_time=&lt;half pulse duration&gt;)</code></pre><p>Creates a gradient echo sequence consisting of:</p><ul><li><code>excitation_pulse</code>: by default this is an <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a>, but can be replaced with an <a href="@ref"><code>RFPulse</code></a>. If the excitation does not take place halfway the RF pulse, <code>excitation_time</code> should be set as well.</li><li>a delay</li><li>a readout <code>TE</code> ms after the excitation.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/sequences/gradient_echo.jl#L7-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.dwi-Tuple{}" href="#MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.dwi-Tuple{}"><code>MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.dwi</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spin_echo(TE; 
    TR=&lt;TE&gt;, scanner=&lt;3T scanner&gt;, 
    excitation_pulse=Instant, excitation_time=&lt;half pulse duration&gt;, 
    refocus_pulse=Instant, refocus_time=&lt;half pulse duration&gt;,
    readout_time=0, diffusion_time=&lt;maximum&gt;, gradient_duration=&lt;maximum&gt;,
    bval/qval/gradient_strength=&lt;one is required&gt;, orientation=:x,
    )</code></pre><p>Creates a gradient echo sequence consisting of:</p><ul><li><code>excitation_pulse</code>: by default this is an <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a>, but can be replaced with an <a href="@ref"><code>RFPulse</code></a>. If the excitation does not take place halfway the RF pulse, <code>excitation_time</code> should be set as well.</li><li>diffusion weighting</li><li><code>refocus_pulse</code>: by default this is an <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a>, but can be replaced with an <a href="@ref"><code>RFPulse</code></a>. If the refocus does not take place halfway the RF pulse, <code>refocus_time</code> should be set as well.</li><li>identical diffusion weighting cancelling out the first one</li><li>a readout <code>TE</code> ms after the excitation.</li></ul><p>The refocus time is always halfway the excitation time and the readout.</p><p>The timings of the RF pulses is set by <code>TE</code> and <code>TR</code>. The gradient timings will also be affected by <code>gradient_duration</code>, <code>diffusion_time</code>, <code>scanner</code> (which sets the ramp time) and readout_time:</p><ul><li>By default the gradient durations are set to the maximum value possible within the echo time (<code>TE</code>) keeping in mind the time needed for the MR readout (<code>readout_time</code>) and the time needed to ramp to the maximum gradient strength (set by the <code>scanner</code>).</li><li>When gradient<em>duration is set to 0, the gradient pulses are assumed to be instanteneous (i.e., using <a href="@ref"><code>InstantGradient</code></a>). The time between these instant gradients can be set using diffusion</em>time (defaults to TE/2).</li></ul><p>The strength of the diffusion gradients is set by one of <code>bval</code> (units: ms/um^2), <code>qval</code> (units: 1/um), or <code>gradient_strength</code> (units: kHz/um). If the resulting gradient strength exceeds the maximum allowed for the <code>scanner</code> an AssertionError is raised. The gradient orientation is set by <code>orientation</code>.</p><p>For more details of how the diffusion weighting is inserted in the <a href="#MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.spin_echo-Tuple{Any}"><code>spin_echo</code></a> sequence, see <a href="#MCMRSimulator.SequenceBuilder.Diffusion.add_linear_diffusion_weighting-Tuple{Any, Any, Any}"><code>add_linear_diffusion_weighting</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/sequences/spin_echo.jl#L39-L63">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.spin_echo-Tuple{Any}" href="#MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.spin_echo-Tuple{Any}"><code>MCMRSimulator.SequenceBuilder.Sequences.SpinEcho.spin_echo</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">spin_echo(TE; TR=&lt;TE&gt;, scanner=&lt;3T scanner&gt;, excitation_pulse=Instant, excitation_time=&lt;half pulse duration&gt;, refocus_pulse=Instant, refocus_time=&lt;half pulse duration&gt;)</code></pre><p>Creates a gradient echo sequence consisting of:</p><ul><li><code>excitation_pulse</code>: by default this is an <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a>, but can be replaced with an <a href="@ref"><code>RFPulse</code></a>. If the excitation does not take place halfway the RF pulse, <code>excitation_time</code> should be set as well.</li><li>a delay</li><li><code>refocus_pulse</code>: by default this is an <a href="#MCMRSimulator.Sequences.Instants.InstantRFPulse"><code>InstantRFPulse</code></a>, but can be replaced with an <a href="@ref"><code>RFPulse</code></a>. If the refocus does not take place halfway the RF pulse, <code>refocus_time</code> should be set as well.</li><li>a readout <code>TE</code> ms after the excitation.</li></ul><p>The refocus time is always halfway the excitation time and the readout.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/sequence_builder/sequences/spin_echo.jl#L8-L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Timestep.TimeController" href="#MCMRSimulator.Timestep.TimeController"><code>MCMRSimulator.Timestep.TimeController</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">TimeController(geometry, B0, diffusivity; max_stepsize=&lt;see docs&gt;, gradient_precision=1, rf_rotation=1)</code></pre><p>Stores the settings controlling the maximum timestep during the simulation, namely:</p><ul><li><code>max_timestep</code>: Generic maximum timestep that is considered throughout the simulation. By default this is set by the minimum of the following three options:<ol><li><span>$\Delta t_1 = l^2/(2 D)$</span>, where <code>l</code> is the <a href="#MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.size_scale-Tuple{MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction}"><code>size_scale</code></a> of the geometry, and <span>$D$</span> is the <code>diffusivity</code>.</li><li><span>$\Delta t_2 = D^{-1/3} (360 * G)^{-2/3} / p$</span>, where <span>$p$</span> is the <code>gradient_precision</code>, and <span>$G$</span> is the maximum off-resonance gradient due to the geometry (see <a href="#MCMRSimulator.Geometries.Internal.Susceptibility.Parent.off_resonance_gradient-Tuple{MCMRSimulator.Geometries.Internal.Susceptibility.Parent.ParentSusceptibility, Any}"><code>off_resonance_gradient</code></a>).</li><li>The timestep required to keep the probability of the spins getting stuck on the surface at a collision below 1.</li></ol></li><li><code>gradient_precision</code>: maximum error in the phase that a spin should incur while a gradient is active in any of the sequences (units: degrees).    If <code>max_stepsize</code> is not set by the user, it is also applied to any geometry-applied gradients (see point 2 above).</li><li><code>rf_rotation</code>: Maximum amount of rotation that an RF pulse should be able to apply in a single timestep (units: degrees).   This constraint is only active if there is an RF pulse active in any of the sequences.</li></ul><p>More details about how these settings are used can be found in <a href="#MCMRSimulator.Timestep.propose_times-Tuple{TimeController, Number, Number, AbstractVector{&lt;:Sequence}, Number}"><code>propose_times</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/timestep.jl#L8-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Timestep.propose_times-Tuple{TimeController, Number, Number, AbstractVector{&lt;:Sequence}, Number}" href="#MCMRSimulator.Timestep.propose_times-Tuple{TimeController, Number, Number, AbstractVector{&lt;:Sequence}, Number}"><code>MCMRSimulator.Timestep.propose_times</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">propose_times(simulation, t_start, t_end)
propose_times(time_controller, t_start, t_end, sequences, diffusivity)</code></pre><p>Computes the timepoints at which the simulation will be evaluated when running from <code>t_start</code> to <code>t_end</code>.</p><p>The following timepoints will always be included</p><ul><li>Any multiple of the TR</li><li>Any RF pulse</li><li>Any change in the gradient strength</li></ul><p>Additional timepoints will be added to ensure that at any step the timestep is lower than the maximum timestep as described in <a href="#MCMRSimulator.Timestep.TimeController"><code>TimeController</code></a>:</p><ul><li>the timestep needed to displace with the <code>simulation.time_controller.max_stepsize</code>.</li><li>at any time the timestep is larger than <span>$D^{-1/3} (360 * G \gamma)^{-2/3} / p$</span>, where <span>$p$</span> is the <code>simulation.time_controller.gradient_precision</code> (given in degrees).   The gradient <span>$G$</span> is the maximum of the user-applied gradient or the maximum off-resonance field gradient.</li><li>During an <a href="@ref"><code>RFPulse</code></a> the rotation around the maximum magnetic field will be at most <code>simulation.time_controller.rf_rotation</code> degrees. </li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/timestep.jl#L43-L59">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Relax.relax!-Tuple{SpinOrientation, Real, Any, Any, Any}" href="#MCMRSimulator.Relax.relax!-Tuple{SpinOrientation, Real, Any, Any, Any}"><code>MCMRSimulator.Relax.relax!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">relax!(spin_orientation, timestep, mri, additional_off_resonance=0)</code></pre><p>Updates [<code>SpinOrientation</code>] after evolving for <code>timestep</code> with given <code>R1</code> (1/ms), <code>R2</code> (1/ms), and <code>off_resonance</code> (kHz).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/relax.jl#L11-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Relax.transfer!-Tuple{SpinOrientation, Float64}" href="#MCMRSimulator.Relax.transfer!-Tuple{SpinOrientation, Float64}"><code>MCMRSimulator.Relax.transfer!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">transfer!(orientation, MT_fraction)</code></pre><p>Loses <code>MT_fraction</code> spin from <code>orientation</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/relax.jl#L50-L54">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Simulations.Simulation" href="#MCMRSimulator.Simulations.Simulation"><code>MCMRSimulator.Simulations.Simulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Simulation(
    sequences; geometry=[], diffusivity=0.,
    R1=0, T1=Inf, R2=0, T2=Inf, off_resonance=0, MT_fraction=0, permeability=0,, 
    max_timestep=&lt;geometry-based default&gt;, gradient_precision=1, rf_rotation=1.,
)</code></pre><p>Defines the setup of the simulation and stores the output of the run.</p><p><strong>Argument</strong></p><p><strong>General parameters:</strong></p><ul><li><code>sequences</code>: Vector of <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> objects. During the spin random walk the simulation will keep track of the spin magnetisations for all of the provided sequences.</li><li><code>geometry</code>: Set of obstructions, which can be used to restrict the diffusion, produce off-resonance fields, alter the local T1/T2 relaxation, and as sources of magnetisation transfer.</li><li><code>diffusivity</code>: Rate of the random motion of the spins in um^2/ms.</li></ul><p><strong>MRI properties</strong></p><p>These parameters determine the evolution and relaxation of the spin magnetisation.</p><ul><li><code>R1</code>/<code>T1</code>: sets the longitudinal relaxation rate (R1 in kHz) or relaxation time (T1=1/R1 in ms). This determines how fast the longitudinal magnetisation returns to its equilibrium value of 1.</li><li><code>R2</code>/<code>T2</code>: sets the transverse relaxation rate (R2 in kHz) or relaxation time (T2=1/R2 in ms). This determines how fast the transverse magnetisation is lost.</li><li><code>off_resonance</code>: Size of the off-resonance field in this voxel in kHz.</li></ul><p>These MRI properties can be overriden for spins inside the <a href="@ref"><code>BaseObstruction</code></a> objects of the <code>geoemtry</code>.</p><p><strong>Collision parameters</strong></p><p>These parameters determine how parameters behave when hitting the <a href="@ref"><code>BaseObstruction</code></a> objects of the <code>geoemtry</code>. They can be overriden for individual [<code>BaseObstruction</code>] objects.</p><ul><li><code>MT_fraction</code>: the fraction of magnetisation transfered between the obstruction and the water spin at each collision.</li><li><code>permeability</code>: the probability that the spin will pass through the obstruction.</li><li><code>surface_density</code>: Density of spins stuck on the surface relative to the volume density of hte free water.</li><li><code>dwell_time</code>: Typical time that spins will stay at the surface after getting stuck.</li></ul><p>Note that <code>MT_fraction</code> and <code>permeability</code> are internally adjusted to make their effect independent of the timestep (see <a href="@ref"><code>correct_for_timestep</code></a>).</p><p><strong>Timestep parameters</strong></p><p>These parameters (<code>max_timestep</code>, <code>gradient_precision</code>, and <code>rf_rotation</code>) control the timepoints at which the simulation is evaluated. The default values should work well. For more details on how to adjust them, see <a href="#MCMRSimulator.Timestep.TimeController"><code>TimeController</code></a>.</p><p><strong>Running the simulation</strong></p><p>To run a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> of spins through the simulations you can use one of the following functions:</p><ul><li><a href="@ref"><code>evolve</code></a>: evolves the spins in the snapshot until a single given time and returns that state in a new <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a>.</li><li><a href="@ref"><code>readout</code></a>: evolves the spins to particular times in each TR and return the total signal at that time (or a <a href="@ref"><code>Snaphshot</code></a>).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/simulations.jl#L11-L51">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Subsets" href="#MCMRSimulator.Subsets"><code>MCMRSimulator.Subsets</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Support for selecting a subset of the total signal.</p><p>Types:</p><ul><li><a href="#MCMRSimulator.Subsets.Subset"><code>Subset</code></a></li></ul><p>Functions:</p><ul><li><a href="#MCMRSimulator.Subsets.get_subset-Tuple{Snapshot, Union{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Simulation}}"><code>get_subset</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/subsets.jl#L1-L9">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Subsets.Subset" href="#MCMRSimulator.Subsets.Subset"><code>MCMRSimulator.Subsets.Subset</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Subset(; bound=nothing, inside=nothing, geometry_index=nothing, obstruction_index=nothing)</code></pre><p>This creates a helper object to extract a subset of a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> from the total snapshot. It defines which spins should be kept. This definition is determined by:</p><ul><li><code>bound</code>: set to true to return only bound spins, to false to return only free spins (default: whether spins are bound is not relevant).</li><li><code>inside</code>: set to true to return only spins inside the geometry, to false to return only spins outside of the geometry (default: whether spins are inside or outside is not relevant).</li><li><code>geometry_index</code>: set to an index to only consider that obstruction group within the total geometry (default: consider the full geometry).</li><li><code>obstruction_index</code>: set to an index to only consider that obstruction group within the total geometry (default: consider the full geometry).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/subsets.jl#L23-L30">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Subsets.get_subset-Tuple{Snapshot, Union{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Simulation}}" href="#MCMRSimulator.Subsets.get_subset-Tuple{Snapshot, Union{Tuple{Vararg{MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup, N}} where N, Simulation}}"><code>MCMRSimulator.Subsets.get_subset</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_subset(snapshot, simulation, subset)
get_subset(snapshot, simulation; bound=nothing, inside=nothing, geometry_index=nothing, obstruction_index=nothing)</code></pre><p>Returns a subset of the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> from the <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> that obey some specific properties. These properties can be either defined by a <a href="#MCMRSimulator.Subsets.Subset"><code>Subset</code></a> object or a set of keyword arguments.</p><p>These keyword arguments are:</p><ul><li><code>bound</code>: set to true to return only bound spins, to false to return only free spins (default: whether spins are bound is not relevant).</li><li><code>inside</code>: set to true to return only spins inside the geometry, to false to return only spins outside of the geometry (default: whether spins are inside or outside is not relevant).</li><li><code>geometry_index</code>: set to an index to only consider that obstruction group within the total geometry (default: consider the full geometry).</li><li><code>obstruction_index</code>: set to an index to only consider that obstruction group within the total geometry (default: consider the full geometry).</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/subsets.jl#L39-L48">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Evolve" href="#MCMRSimulator.Evolve"><code>MCMRSimulator.Evolve</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines the functions that run the actual simulation:</p><ul><li><a href="#MCMRSimulator.Evolve.readout-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>readout</code></a>: get total signal or <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> at any <a href="@ref"><code>Readout</code></a> objects in the sequences.</li><li><a href="#MCMRSimulator.Evolve.evolve-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>evolve</code></a>: Return a single <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> with the state of the simulation at a given time. This snapshot can be used as initialisation for further runs.</li></ul><p>All of these functions call <a href="#MCMRSimulator.Evolve.evolve_to_time-Union{Tuple{N}, Tuple{Snapshot{N}, Simulation{N, NG} where NG, Float64}} where N"><code>evolve_to_time</code></a> under the hood to actually run the simulation.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/evolve.jl#L1-L7">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Evolve.draw_step!-Union{Tuple{N}, Tuple{Spin{N}, Simulation{N, 0, G} where G&lt;:Tuple{}, StaticArraysCore.SVector{N, MCMRSimulator.Sequences.Main.SequencePart}, Float64}} where N" href="#MCMRSimulator.Evolve.draw_step!-Union{Tuple{N}, Tuple{Spin{N}, Simulation{N, 0, G} where G&lt;:Tuple{}, StaticArraysCore.SVector{N, MCMRSimulator.Sequences.Main.SequencePart}, Float64}} where N"><code>MCMRSimulator.Evolve.draw_step!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">draw_step!(spin, simulation, sequence_parts, timestep)</code></pre><p>Updates the spin based on a random movement through the given geometry for a given <code>timestep</code>:</p><ul><li>draws the next location of the particle after <code>timestep</code> with given <code>simulation.diffusivity</code>.   This displacement will take into account the obstructions in <code>simulation.geometry</code>.</li><li>The spin orientation will be affected by relaxation (see <a href="#MCMRSimulator.Relax.relax!-Tuple{SpinOrientation, Real, Any, Any, Any}"><code>relax!</code></a>) and potentially by magnetisation transfer during collisions.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/evolve.jl#L159-L166">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Evolve.evolve-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N" href="#MCMRSimulator.Evolve.evolve-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>MCMRSimulator.Evolve.evolve</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evolve(snapshot, simulation[, new_time]; bounding_box=&lt;1x1x1 mm box&gt;)</code></pre><p>Evolves the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> through the <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> to a new time. Returns a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> at the new time, which can be used as a basis for further simulation. If undefined <code>new_time</code> will be set to the start of the next TR.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/evolve.jl#L140-L146">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Evolve.evolve_to_time-Union{Tuple{N}, Tuple{Snapshot{N}, Simulation{N, NG} where NG, Float64}} where N" href="#MCMRSimulator.Evolve.evolve_to_time-Union{Tuple{N}, Tuple{Snapshot{N}, Simulation{N, NG} where NG, Float64}} where N"><code>MCMRSimulator.Evolve.evolve_to_time</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">evolve_to_time(snapshot, simulation, new_time)</code></pre><p>Evolves the full <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> through the <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> to the given <code>new_time</code>. Multi-threading is used to evolve multiple spins in parallel. This is used internally when calling any of the snapshot evolution methods (e.g., <a href="#MCMRSimulator.Evolve.evolve-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>evolve</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/evolve.jl#L284-L290">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Evolve.readout-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N" href="#MCMRSimulator.Evolve.readout-Union{Tuple{N}, Tuple{Any, Simulation{N, NG} where NG}, Tuple{Any, Simulation{N, NG} where NG, Any}} where N"><code>MCMRSimulator.Evolve.readout</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">readout(spins, simulation[, readout_times]; bounding_box=&lt;1x1x1 mm box&gt;, skip_TR=0, nTR=1, return_snapshot=false, subset=&lt;all&gt;)</code></pre><p>Evolves a set of spins through the <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a>. Returns the total signal or a full <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> at every readout time in the simulated sequences over one or more repetition times (TRs).</p><p><strong>Positional arguments:</strong></p><ul><li><code>spins</code>: Number of spins to simulate or an already existing <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a>.</li><li><code>simulation</code>: <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> object defining the environment, scanner, and sequence(s).</li><li><code>times</code> (optional): time of the readouts relative to the start of the TR (in ms). If not provided, the times of any <a href="@ref"><code>Readout</code></a> objects in the sequence will be used.</li></ul><p><strong>Keyword arguments:</strong></p><ul><li><code>bounding_box</code>: size of the voxel in which the spins are initiated in um (default is 1000, corresponding to a 1x1x1 mm box centered on zero). Can be set to a <a href="#MCMRSimulator.Geometries.Internal.BoundingBoxes.BoundingBox"><code>BoundingBox</code></a> object for more control.</li><li><code>skip_TR</code>: Number of repetition times to skip before starting the readout.    Even if set to zero (the default), the simulator will still skip the current TR before starting the readout    if the starting snapshot is from a time past one of the sequence readouts.</li><li><code>nTR</code>: number of TRs for which to store the output</li><li><code>return_snapshot</code>: set to true to output the state of all the spins as a <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> at each readout instead of a <a href="#MCMRSimulator.Spins.SpinOrientationSum"><code>SpinOrientationSum</code></a> with the total signal.</li><li><code>subset</code>: Return the signal/snapshot for a subset of all spins. Can be set to a single or a vector of <a href="#MCMRSimulator.Subsets.Subset"><code>Subset</code></a> objects. If set to a vector, this will add an attional dimension to the output.</li></ul><p><strong>Returns</strong></p><p>The function returns an up to 3-dimensional (KxLxMxN) array, with the following dimensions:</p><ul><li><code>K</code>: the number of sequences. This dimension is not included if the simulation only contains a single sequencen (and this single sequence is not passed into the <a href="#MCMRSimulator.Simulations.Simulation"><code>Simulation</code></a> as a vector).</li><li><code>L</code>: the number of readout times with a single TR. This dimension is skipped if the <code>readout_times</code> is set to a scalar number. This dimension might contain <code>nothing</code>s for sequences that contain fewer <a href="@ref"><code>Readout</code></a> objects than the maximum (<code>M</code>).</li><li><code>M</code>: the number of TRs (controlled by the <code>nTR</code> keyword). If <code>nTR</code> is not explicitly set by the user, this dimension is skipped.</li><li><code>N</code>: the number of subsets (controlled by the <code>subset</code> keyword). If <code>subset</code> is set to a single value (&lt;all&gt; by default), this dimension is skipped.</li></ul><p>By default each element of this matrix is either a <a href="#MCMRSimulator.Spins.SpinOrientationSum"><code>SpinOrientationSum</code></a> with the total signal. If <code>return_snapshot=true</code> is set, each element is the full <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> instead.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/evolve.jl#L25-L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}" href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>MCMRSimulator.Plot.Utils.color</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">color(orient::SpinOrientation; saturation=1.)</code></pre><p>Returns a color representing the spin orientation in the transverse (x-y) plane. Brighter colors have a larger transverse component, so that spins with no transverse component are black. The actual color encodes the spin orientation.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/utils.jl#L4-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.PlotPlanes.PlotPlane" href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>MCMRSimulator.Plot.PlotPlanes.PlotPlane</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Defines a finite plane in the 3D space used for plotting.</p><p><strong>Constructor</strong></p><pre><code class="nohighlight hljs">PlotPlane(normal=[0, 0, 1], position=[0, 0, 0]; size=10., sizex=&lt;size&gt;, sizey=&lt;size&gt;, ngrid=100)</code></pre><p>Arguments:</p><ul><li><code>normal</code>: length-3 vector with the orientation perpendicular to the plane (default to z-direction).</li><li><code>position</code>: position of plane as a length-3 vector (defaults to origin).</li><li><code>sizex</code>: size of the plane in the x-direction (before rotating to <code>normal</code>).</li><li><code>sizey</code>: size of the plane in the y-direction (before rotating to <code>normal</code>).</li><li><code>size</code>: set default value for <code>sizex</code> and <code>sizey</code>.</li><li><code>ngrid</code>: number of grid elements to split the plane up into for plotting.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/plot_planes.jl#L8-L21">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.PlotPlanes.project_on_grid-Tuple{PlotPlane, Snapshot{1}, Int64}" href="#MCMRSimulator.Plot.PlotPlanes.project_on_grid-Tuple{PlotPlane, Snapshot{1}, Int64}"><code>MCMRSimulator.Plot.PlotPlanes.project_on_grid</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">project_on_grid(plot_plane, snap, ngrid)</code></pre><p>Spins from the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> are projected onto the grid defined by <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a> in two ways:</p><ul><li>along the normal spins are projected onto the plane from infinitely far (TODO: give finite extent)</li><li>in the other directions any spins are projected onto the plane using mod(position[1], <code>sizex</code>) and mod(position[2], <code>sizey</code>).   This assumes that the geometry and field repeats itself ad infinitum beyond the <code>PlotPlane</code> (TODO: allow this assumption to be turned off).</li></ul><p>In effect, this means that all spins are projected onto the <code>PlotPlane</code>. The average spin orientation in each grid cell is returned.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/plot_planes.jl#L104-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Sequences.sequence_plot" href="#MCMRSimulator.Plot.Sequences.sequence_plot"><code>MCMRSimulator.Plot.Sequences.sequence_plot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot(sequence)
plot!(sequence)
plot_sequence(sequence)
plot_sequence!(sequence)</code></pre><p>Creates a visual representation of a <a href="#MCMRSimulator.Sequences.Main.Sequence"><code>Sequence</code></a> diagram.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/sequences.jl#L15-L22">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Geometries.plot_geometry!-Tuple" href="#MCMRSimulator.Plot.Geometries.plot_geometry!-Tuple"><code>MCMRSimulator.Plot.Geometries.plot_geometry!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(plot_plane, geometry)
plot!(plot_plane, geometry)
plot_geometry(plot_plane, geometry)
plot_geometry!(plot_plane, geometry)</code></pre><p>Plots the intersections of <code>geometry</code> in the <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/geometries.jl#L8-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Geometries.plot_geometry-Tuple" href="#MCMRSimulator.Plot.Geometries.plot_geometry-Tuple"><code>MCMRSimulator.Plot.Geometries.plot_geometry</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(plot_plane, geometry)
plot!(plot_plane, geometry)
plot_geometry(plot_plane, geometry)
plot_geometry!(plot_plane, geometry)</code></pre><p>Plots the intersections of <code>geometry</code> in the <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/geometries.jl#L8-L15">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Geometries.project_geometry-Union{Tuple{N}, Tuple{L}, Tuple{PlotPlane, MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}}} where {L, N}" href="#MCMRSimulator.Plot.Geometries.project_geometry-Union{Tuple{N}, Tuple{L}, Tuple{PlotPlane, MCMRSimulator.Geometries.Internal.FixedObstructionGroups.FixedObstructionGroup{L, N, R, O, B} where {R, O&lt;:MCMRSimulator.Geometries.Internal.Obstructions.FixedObstructions.FixedObstruction{N}, B&lt;:Union{Nothing, Array{BoundingBox{N}, 1}}}}} where {L, N}"><code>MCMRSimulator.Plot.Geometries.project_geometry</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">project_geometry(plot_plane, transform)</code></pre><p>Projects the plane on the intrinsic plane of the obstructions deformed by <code>transform</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/geometries.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.OffResonance.plot_off_resonance!-Tuple" href="#MCMRSimulator.Plot.OffResonance.plot_off_resonance!-Tuple"><code>MCMRSimulator.Plot.OffResonance.plot_off_resonance!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot_off_resonance(plot_plane, geometry)
plot_off_resonance(plot_plane, geometry)</code></pre><p>Plots the off-resonance of <code>geometry</code> in the <a href="@ref"><code>PlotPlane</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/off_resonance.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.OffResonance.plot_off_resonance-Tuple" href="#MCMRSimulator.Plot.OffResonance.plot_off_resonance-Tuple"><code>MCMRSimulator.Plot.OffResonance.plot_off_resonance</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot_off_resonance(plot_plane, geometry)
plot_off_resonance(plot_plane, geometry)</code></pre><p>Plots the off-resonance of <code>geometry</code> in the <a href="@ref"><code>PlotPlane</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/off_resonance.jl#L7-L12">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.dyad_snapshot!-Tuple" href="#MCMRSimulator.Plot.Snapshots.dyad_snapshot!-Tuple"><code>MCMRSimulator.Plot.Snapshots.dyad_snapshot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dyad_snapshot(plot_plane, snapshot; dyadlength=0.1, arrowsize=0.1, color=:black, sequence=1)</code></pre><p>Plots the spins in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> projected onto given <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a> as arrows.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.dyad_snapshot-Tuple" href="#MCMRSimulator.Plot.Snapshots.dyad_snapshot-Tuple"><code>MCMRSimulator.Plot.Snapshots.dyad_snapshot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dyad_snapshot(plot_plane, snapshot; dyadlength=0.1, arrowsize=0.1, color=:black, sequence=1)</code></pre><p>Plots the spins in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> projected onto given <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a> as arrows.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.image_snapshot!-Tuple" href="#MCMRSimulator.Plot.Snapshots.image_snapshot!-Tuple"><code>MCMRSimulator.Plot.Snapshots.image_snapshot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">image_snapshot(plot_plane, snapshot; vectorlength=0.1, arrowsize=0.1, color=:black, sequence=1)
image_snapshot!(plot_plane, snapshot; vectorlength=0.1, arrowsize=0.1, color=:black, sequence=1)</code></pre><p>Plots the spins in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> projected onto given <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a>. The average spin orientation across the plot plane is plotted using the colour coding from <a href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>color</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L65-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.image_snapshot-Tuple" href="#MCMRSimulator.Plot.Snapshots.image_snapshot-Tuple"><code>MCMRSimulator.Plot.Snapshots.image_snapshot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">image_snapshot(plot_plane, snapshot; vectorlength=0.1, arrowsize=0.1, color=:black, sequence=1)
image_snapshot!(plot_plane, snapshot; vectorlength=0.1, arrowsize=0.1, color=:black, sequence=1)</code></pre><p>Plots the spins in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> projected onto given <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a>. The average spin orientation across the plot plane is plotted using the colour coding from <a href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>color</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L65-L71">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.plot_snapshot" href="#MCMRSimulator.Plot.Snapshots.plot_snapshot"><code>MCMRSimulator.Plot.Snapshots.plot_snapshot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot(plot_plane, snapshot; kwargs...)
plot!(plot_plane, snapshot; kwargs...)
plot_snapshot(plot_plane, snapshot; kwargs...)
plot_snapshot!(plot_plane, snapshot; kwargs...)</code></pre><p>Plots the spins in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> projected onto given <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a>. Each spin is represented by an arrow showing the transverse component of the spin (for a total of the first <code>ndyads</code> spins). The average spin orientation across the plot plane is plotted using the colour coding from <a href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>color</code></a>.</p><p>This combines the plotting from <a href="#MCMRSimulator.Plot.Snapshots.image_snapshot-Tuple"><code>image_snapshot</code></a> and <a href="#MCMRSimulator.Plot.Snapshots.dyad_snapshot-Tuple"><code>dyad_snapshot</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L102-L113">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.scatter_snapshot!-Tuple" href="#MCMRSimulator.Plot.Snapshots.scatter_snapshot!-Tuple"><code>MCMRSimulator.Plot.Snapshots.scatter_snapshot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(snapshot)
plot!(snapshot)
scatter_snapshot(snapshot)
scatter_snapshot!(snapshot)</code></pre><p>Plots the spin positions in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> in 3D color coded by the spin&#39;s orientation (see <a href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>color</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L6-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Snapshots.scatter_snapshot-Tuple" href="#MCMRSimulator.Plot.Snapshots.scatter_snapshot-Tuple"><code>MCMRSimulator.Plot.Snapshots.scatter_snapshot</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(snapshot)
plot!(snapshot)
scatter_snapshot(snapshot)
scatter_snapshot!(snapshot)</code></pre><p>Plots the spin positions in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> in 3D color coded by the spin&#39;s orientation (see <a href="#MCMRSimulator.Plot.Utils.color-Tuple{Union{Spin{1}, SpinOrientation}}"><code>color</code></a>).</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L6-L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MakieCore.plot!-Tuple{MakieCore.Combined{MCMRSimulator.Plot.Snapshots.dyad_snapshot}}" href="#MakieCore.plot!-Tuple{MakieCore.Combined{MCMRSimulator.Plot.Snapshots.dyad_snapshot}}"><code>MakieCore.plot!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">dyad_snapshot(plot_plane, snapshot; dyadlength=0.1, arrowsize=0.1, color=:black, sequence=1)
dyad_snapshot(plot_plane, snapshot; dyadlength=0.1, arrowsize=0.1, color=:black, sequence=1)</code></pre><p>Plots the spins in the <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> projected onto given <a href="#MCMRSimulator.Plot.PlotPlanes.PlotPlane"><code>PlotPlane</code></a>. Each spin is represented by an arrow showing the transverse component of the spin.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/snapshots.jl#L44-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Trajectory.plot_trajectory2d!-Tuple" href="#MCMRSimulator.Plot.Trajectory.plot_trajectory2d!-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory2d!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(snapshots)
plot!(snapshots)
plot_trajectory3d(snapshots)
plot_trajectory3d!(snapshots)</code></pre><p>Plots trajectory of the spins in a sequence of <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/trajectory.jl#L36-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Trajectory.plot_trajectory2d-Tuple" href="#MCMRSimulator.Plot.Trajectory.plot_trajectory2d-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory2d</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(snapshots)
plot!(snapshots)
plot_trajectory3d(snapshots)
plot_trajectory3d!(snapshots)</code></pre><p>Plots trajectory of the spins in a sequence of <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/trajectory.jl#L36-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Trajectory.plot_trajectory3d!-Tuple" href="#MCMRSimulator.Plot.Trajectory.plot_trajectory3d!-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory3d!</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(snapshots)
plot!(snapshots)
plot_trajectory3d(snapshots)
plot_trajectory3d!(snapshots)</code></pre><p>Plots trajectory of the spins in a sequence of <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/trajectory.jl#L7-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.Plot.Trajectory.plot_trajectory3d-Tuple" href="#MCMRSimulator.Plot.Trajectory.plot_trajectory3d-Tuple"><code>MCMRSimulator.Plot.Trajectory.plot_trajectory3d</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">plot(snapshots)
plot!(snapshots)
plot_trajectory3d(snapshots)
plot_trajectory3d!(snapshots)</code></pre><p>Plots trajectory of the spins in a sequence of <a href="#MCMRSimulator.Spins.Snapshot"><code>Snapshot</code></a> objects.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/plot/trajectory.jl#L7-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI" href="#MCMRSimulator.CLI"><code>MCMRSimulator.CLI</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines the command line interface to MCMRSimulator.jl (<code>mcmr</code>).</p><p>Functions:</p><ul><li><a href="@ref"><code>run_main</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/cli.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Geometry" href="#MCMRSimulator.CLI.Geometry"><code>MCMRSimulator.CLI.Geometry</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines command line interface for <code>mcmr geometry</code></p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/geometry.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Geometry.get_parser-Tuple{}" href="#MCMRSimulator.CLI.Geometry.get_parser-Tuple{}"><code>MCMRSimulator.CLI.Geometry.get_parser</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_parser()</code></pre><p>Returns the parser of arguments for <code>mcmr geometry</code></p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/geometry.jl#L14-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Geometry.parse_user_argument-Union{Tuple{T}, Tuple{MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue{T}, Any, Any}} where T" href="#MCMRSimulator.CLI.Geometry.parse_user_argument-Union{Tuple{T}, Tuple{MCMRSimulator.Geometries.User.Obstructions.Fields.FieldValue{T}, Any, Any}} where T"><code>MCMRSimulator.CLI.Geometry.parse_user_argument</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">parse_user_argument(field_value, value, n_objects)</code></pre><p>Parse the user argument to something that can actually be used internally by Julia.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/geometry.jl#L167-L171">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Geometry.run_main" href="#MCMRSimulator.CLI.Geometry.run_main"><code>MCMRSimulator.CLI.Geometry.run_main</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">run_main([arguments])</code></pre><p>Runs the <code>mcmr geometry</code> command line interface. The supplied arguments can be provided as a sequence of strings (as provided by the terminal) or as a dictionary (as provided by <code>ArgParse</code> after parsing). By default it is set to <code>ARGS</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/geometry.jl#L215-L222">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Sequence" href="#MCMRSimulator.CLI.Sequence"><code>MCMRSimulator.CLI.Sequence</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines the command line interface to <code>mcmr sequence</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/sequence.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Sequence.run_main" href="#MCMRSimulator.CLI.Sequence.run_main"><code>MCMRSimulator.CLI.Sequence.run_main</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">run_main([arguments])</code></pre><p>Runs the <code>mcmr sequence</code> command line interface. Arguments are provided as a sequence of strings. By default it is set to <code>ARGS</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/sequence.jl#L178-L184">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run" href="#MCMRSimulator.CLI.Run"><code>MCMRSimulator.CLI.Run</code></a> — <span class="docstring-category">Module</span></header><section><div><p>Defines the command line interface to <code>mcmr run</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L1-L3">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run.add_init_flags!-Tuple{Any}" href="#MCMRSimulator.CLI.Run.add_init_flags!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_init_flags!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Add initialisation flags to an argument parser.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L82">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run.add_output_flags!-Tuple{Any}" href="#MCMRSimulator.CLI.Run.add_output_flags!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_output_flags!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Add output flags to an argument parser.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L42">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run.add_readout_flags!-Tuple{Any}" href="#MCMRSimulator.CLI.Run.add_readout_flags!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_readout_flags!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Add readout flags to an argument parser.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L53">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run.add_simulation_definition!-Tuple{Any}" href="#MCMRSimulator.CLI.Run.add_simulation_definition!-Tuple{Any}"><code>MCMRSimulator.CLI.Run.add_simulation_definition!</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Add simulation definition parameters to an argument parser.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L17">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run.get_parser-Tuple{}" href="#MCMRSimulator.CLI.Run.get_parser-Tuple{}"><code>MCMRSimulator.CLI.Run.get_parser</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_parser()</code></pre><p>Returns the parser of arguments for <code>mcmr run</code></p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L114-L118">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="MCMRSimulator.CLI.Run.run_main" href="#MCMRSimulator.CLI.Run.run_main"><code>MCMRSimulator.CLI.Run.run_main</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">run_main([arguments])</code></pre><p>Runs the <code>mcmr run</code> command line interface. The supplied arguments can be provided as a sequence of strings (as provided by the terminal) or as a dictionary (as provided by <code>ArgParse</code> after parsing). By default it is set to <code>ARGS</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/-/tree/f9598d6e1e7e3cab0f4aca351b635c4c11afddc2/src/cli/run.jl#L128-L135">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../properties/">« MRI/collision properties</a><a class="docs-footer-nextpage" href="../references/">References »</a><div class="flexbox-break"></div></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.0 on <span class="colophon-date" title="Thursday 5 October 2023 11:29">Thursday 5 October 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
