<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Geometry · MCMRSimulator.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">MCMRSimulator.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Geometry</a><ul class="internal"><li><a class="tocitem" href="#Defining-the-geometry"><span>Defining the geometry</span></a></li><li><a class="tocitem" href="#Defining-a-mesh"><span>Defining a mesh</span></a></li></ul></li><li><a class="tocitem" href="../sequence/">Sequence</a></li><li><a class="tocitem" href="../off_resonance/">Magnetic susceptibility</a></li><li><a class="tocitem" href="../api/">API</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Geometry</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Geometry</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://git.fmrib.ox.ac.uk/ndcn0236/MCMRSimulator.jl/blob/main/docs/src/obstructions.md#" title="Edit source"><span class="docs-icon fa"></span><span class="docs-label is-hidden-touch">Edit source</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="geometry"><a class="docs-heading-anchor" href="#geometry">Obstructions to free diffusion</a><a id="geometry-1"></a><a class="docs-heading-anchor-permalink" href="#geometry" title="Permalink"></a></h1><h2 id="Defining-the-geometry"><a class="docs-heading-anchor" href="#Defining-the-geometry">Defining the geometry</a><a id="Defining-the-geometry-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-the-geometry" title="Permalink"></a></h2><p>MCMRSimulator.jl comes with a variety of basic components that can be used to represent various components in the tissue microstructure.</p><table><tr><th style="text-align: right">Component</th><th style="text-align: right">Class</th><th style="text-align: right">Constructor</th><th style="text-align: right">Dimensionality</th></tr><tr><td style="text-align: right">infinite walls</td><td style="text-align: right"><a href="../api/#MCMRSimulator.Wall"><code>Wall</code></a></td><td style="text-align: right"><a href="../api/#MCMRSimulator.walls-Tuple{}"><code>walls</code></a></td><td style="text-align: right">1</td></tr><tr><td style="text-align: right">hollow infinite cylinder</td><td style="text-align: right"><a href="../api/#MCMRSimulator.Cylinder"><code>Cylinder</code></a></td><td style="text-align: right"><a href="../api/#MCMRSimulator.cylinders-Tuple"><code>cylinders</code></a></td><td style="text-align: right">2</td></tr><tr><td style="text-align: right">Annulus with inner and outer cylinders</td><td style="text-align: right"><a href="../api/#MCMRSimulator.Annulus"><code>Annulus</code></a></td><td style="text-align: right"><a href="../api/#MCMRSimulator.annuli-Tuple"><code>annuli</code></a></td><td style="text-align: right">2</td></tr><tr><td style="text-align: right">Spirals</td><td style="text-align: right"><a href="../api/#MCMRSimulator.Spiral"><code>Spiral</code></a></td><td style="text-align: right"><a href="../api/#MCMRSimulator.spirals-Tuple"><code>spirals</code></a></td><td style="text-align: right">2</td></tr><tr><td style="text-align: right">hollow sphere</td><td style="text-align: right"><a href="../api/#MCMRSimulator.Sphere"><code>Sphere</code></a></td><td style="text-align: right"><a href="../api/#MCMRSimulator.spheres-Tuple"><code>spheres</code></a></td><td style="text-align: right">3</td></tr><tr><td style="text-align: right">mesh</td><td style="text-align: right"><a href="../api/#MCMRSimulator.Mesh"><code>Mesh</code></a></td><td style="text-align: right">see <a href="#Defining-a-mesh">Defining a mesh</a></td><td style="text-align: right">3</td></tr></table><p>The constructors for these components all have a similar interface. Some expect certain component-specific arguments (e.g., radii for <a href="../api/#MCMRSimulator.spheres-Tuple"><code>spheres</code></a> and <a href="../api/#MCMRSimulator.cylinders-Tuple"><code>cylinders</code></a>. Some also have component-specific keyword argumetns (e.g., the keywords regarding the off-resonance produces by <a href="../off_resonance/#Myelinated_cylinders">Myelinated cylinders</a>). Finally, they expect a set of keyword arguments that control their location. These arguments are identicaly across all constructors (although the expected input depends on the dimensionality of the component as listed in the table above):</p><ul><li><code>positions</code>: Set the positions for each generated components</li><li><code>repeats</code>: Set the distance with which all components should be repeated</li><li><code>rotation</code>: Applies a single rotation to the whole system.</li></ul><p>Components with a lower dimensionality are defined by default along the x-axis (for dimensionality of 1) or the x-y plane (for dimensionality of 2).  In other words, the normal of the <a href="../api/#MCMRSimulator.walls-Tuple{}"><code>walls</code></a> point in the x-axis by default, while the <a href="../api/#MCMRSimulator.cylinders-Tuple"><code>cylinders</code></a> point in the z-axis. Shifts and repeats should only be provided in this lower-dimensional space. The <code>rotation</code> can be used to define these components along other lines/planes.</p><p>For example, we can create two base cylinders, which repeeat infinitely by running:</p><pre><code class="language-julia hljs">using MCMRSimulator
geometry = cylinders(sqrt(0.5), positions=[[0, 0], [1, 1]], repeats=[2, 2])</code></pre><p><img src="../regular_cylinders.png" alt="Plot showing two cylinders repeating ad infinitum"/></p><p>Alternatively, the same configuration could be produced with a single cylinder by providing a <code>rotation</code>.</p><pre><code class="language-julia hljs">using MCMRSimulator
rotation = [
    sqrt(0.5) sqrt(0.5) 0.
    -sqrt(0.5) sqrt(0.5) 0.
    0. 0. 1.
    ]
geometry = cylinders(sqrt(0.5), repeats=[sqrt(2), sqrt(2)], rotation=rotation)</code></pre><p><img src="../regular_cylinders2.png" alt="Plot showing single cylinders repeating ad infinitum"/></p><p>Myelin can be added to the cylinders, spirals, or annuli as described <a href="../off_resonance/#off_resonance">here</a>.</p><p>A geometry is defined by either the <a href="../api/#MCMRSimulator.TransformObstruction"><code>TransformObstruction</code></a> returned by a single call to these constructors or by an array of <a href="../api/#MCMRSimulator.TransformObstruction"><code>TransformObstruction</code></a> objects.</p><h3 id="Randomly-distributed-cylinders/annuli/spirals"><a class="docs-heading-anchor" href="#Randomly-distributed-cylinders/annuli/spirals">Randomly distributed cylinders/annuli/spirals</a><a id="Randomly-distributed-cylinders/annuli/spirals-1"></a><a class="docs-heading-anchor-permalink" href="#Randomly-distributed-cylinders/annuli/spirals" title="Permalink"></a></h3><p>A random set of positions and radii can be created using <a href="../api/#MCMRSimulator.random_positions_radii-Tuple{Any, Real, Int64}"><code>random_positions_radii</code></a>. The user in this case sets a target density (70% in the example below) and over which length scale the configuration should repeat itself (20x20 micrometer in the example below).</p><pre><code class="language-julia hljs">(positions, outer_radii) = random_positions_radii((20, 20), 0.7, 2)</code></pre><p>These can be used to produce randomly distributed cylinders:</p><pre><code class="language-julia hljs">geometry = cylinders(outer_radii; positions=positions, repeats=(20, 20))</code></pre><p><img src="../random_cylinders.png" alt="Illustrating configuration of random cylinders"/></p><p>When used as initialisation for annuli or spirals, an inner radius will also need to be computed:</p><pre><code class="language-julia hljs">inner_radii = 0.8 .* outer_radii
geometry = annuli(inner_radii, outer_radii; positions=positions, repeats=(20, 20))</code></pre><p><img src="../random_annuli.png" alt="Illustrating configuration of random annuli"/></p><h2 id="Defining-a-mesh"><a class="docs-heading-anchor" href="#Defining-a-mesh">Defining a mesh</a><a id="Defining-a-mesh-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-a-mesh" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../sequence/">Sequence »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Thursday 2 February 2023 09:42">Thursday 2 February 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
